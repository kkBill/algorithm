## äºŒåˆ†æ³•é—®é¢˜æ±‡æ€»

ã€å†™åœ¨å‰é¢ã€‘

äºŒåˆ†æŸ¥æ‰¾é—®é¢˜è™½ç„¶çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†åœ¨ç¼–å†™ä»£ç æ—¶å°±æ˜¯ä¼šå‡ºé”™ï¼Œè¦ä¹ˆä¼šæ¼ä¸ªç­‰å·ï¼Œè¦ä¹ˆå°‘åŠ ä¸ª 1ç­‰ç­‰ã€‚ä¸è¦æ°”é¦ï¼Œå› ä¸ºäºŒåˆ†æŸ¥æ‰¾å…¶å®å¹¶ä¸ç®€å•ã€‚çœ‹çœ‹ Knuth å¤§ä½¬ï¼ˆå‘æ˜ KMP ç®—æ³•çš„é‚£ä½ï¼‰æ˜¯æ€ä¹ˆè¯´çš„ï¼š

> Although the basic idea of binary search is comparatively straightforward, the details can be surprisingly tricky...

Soï¼Œå…³æ³¨ç»†èŠ‚ï¼Œä¸æ–­ç»ƒä¹ ï¼

é¢˜ç›®åˆ—è¡¨ï¼š
  - [704. äºŒåˆ†æŸ¥æ‰¾](#704-äºŒåˆ†æŸ¥æ‰¾)
  - [34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®](#34-åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®)
  - [35. æœç´¢æ’å…¥ä½ç½®](#35-æœç´¢æ’å…¥ä½ç½®)
  - [33. æœç´¢æ—‹è½¬æœ‰åºæ•°ç»„](#33-æœç´¢æ—‹è½¬æœ‰åºæ•°ç»„)
  - [81. æœç´¢æ—‹è½¬æœ‰åºæ•°ç»„â…¡](#81-æœç´¢æ—‹è½¬æœ‰åºæ•°ç»„â…±)
  - [153. å¯»æ‰¾æ—‹è½¬æœ‰åºæ•°ç»„ä¸­çš„æœ€å°å€¼](#153-å¯»æ‰¾æ—‹è½¬æœ‰åºæ•°ç»„ä¸­çš„æœ€å°å€¼)
  - [154. å¯»æ‰¾æ—‹è½¬æœ‰åºæ•°ç»„ä¸­çš„æœ€å°å€¼â…¡](#154-å¯»æ‰¾æ—‹è½¬æœ‰åºæ•°ç»„ä¸­çš„æœ€å°å€¼â…±)
  - [74. æœç´¢äºŒç»´çŸ©é˜µ](#74-æœç´¢äºŒç»´çŸ©é˜µ)
  - [240. æœç´¢äºŒç»´çŸ©é˜µ II](#240-æœç´¢äºŒç»´çŸ©é˜µ-ii)
  - [69. x çš„å¹³æ–¹æ ¹](#69-x-çš„å¹³æ–¹æ ¹)
  - [367. æœ‰æ•ˆçš„å®Œå…¨å¹³æ–¹æ•°](#367-æœ‰æ•ˆçš„å®Œå…¨å¹³æ–¹æ•°)
  - [50. Pow(x, n)](#50-powx-n)
  - [278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬](#278-ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬)
  - [275. HæŒ‡æ•° II](#275-hæŒ‡æ•°-ii)
  - [274. HæŒ‡æ•°](#274-hæŒ‡æ•°)
  - [162. å¯»æ‰¾å³°å€¼](#162-å¯»æ‰¾å³°å€¼)
  - [4. å¯»æ‰¾ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°](#4-å¯»æ‰¾ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°)
  - [29. ä¸¤æ•°ç›¸é™¤](#29-ä¸¤æ•°ç›¸é™¤)

---

äºŒåˆ†æŸ¥æ‰¾çš„å‰æ

* ç›®æ ‡å‡½æ•°çš„å•è°ƒæ€§
* å­˜åœ¨ä¸Šä¸‹ç•Œ
* èƒ½å¤Ÿé€šè¿‡ç´¢å¼•è®¿é—®

åŸºç¡€æ¨¡æ¿

```java
public int binarySearch(int[] array, int target) {
    int left = 0, right = array.length - 1, mid = 0;
    while (left <= right) { // â€œâ‰¤â€è¿˜æ˜¯â€œï¼œâ€ï¼Œå…·ä½“é—®é¢˜å…·ä½“åˆ†æ
        mid = (right - left) / 2 + left;
        if (array[mid] == target) {
            return mid;
        } else if (array[mid] > target) {
            right = mid - 1; // å…·ä½“é—®é¢˜å…·ä½“åˆ†æ
        } else {
            left = mid + 1; // å…·ä½“é—®é¢˜å…·ä½“åˆ†æ
        }
    }
    return -1;
}
```



### [704. äºŒåˆ†æŸ¥æ‰¾](https://leetcode-cn.com/problems/binary-search/)

ç»™å®šä¸€ä¸ª n ä¸ªå…ƒç´ **æœ‰åº**çš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„ nums å’Œä¸€ä¸ª**ç›®æ ‡å€¼ target**  ï¼Œå†™ä¸€ä¸ªå‡½æ•°æœç´¢ nums ä¸­çš„ targetï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1ã€‚

```
ç¤ºä¾‹ 1:
è¾“å…¥: nums = [-1,0,3,5,9,12], target = 9
è¾“å‡º: 4
è§£é‡Š: 9 å‡ºç°åœ¨ nums ä¸­å¹¶ä¸”ä¸‹æ ‡ä¸º 4

ç¤ºä¾‹ 2:
è¾“å…¥: nums = [-1,0,3,5,9,12], target = 2
è¾“å‡º: -1
è§£é‡Š: 2 ä¸å­˜åœ¨ nums ä¸­å› æ­¤è¿”å› -1


æç¤ºï¼š
ä½ å¯ä»¥å‡è®¾ nums ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯ä¸é‡å¤çš„ã€‚
n å°†åœ¨ [1, 10000]ä¹‹é—´ã€‚
nums çš„æ¯ä¸ªå…ƒç´ éƒ½å°†åœ¨ [-9999, 9999]ä¹‹é—´ã€‚
```

åˆ†æï¼šè¿™æ˜¯äºŒåˆ†æŸ¥æ‰¾æœ€åŸºç¡€çš„æ¨¡æ¿é¢˜ã€‚ä½†æ˜¯æ¨¡æ¿ä¹Ÿæœ‰ä¸åŒçš„å†™æ³•ï¼Œå½“åœºæ™¯å˜å¾—å¤æ‚ä¹‹åï¼Œé€‰æ‹©ä¸åŒçš„æ¨¡æ¿å¯èƒ½å¯¹ç¼–ç æœ‰ä¸åŒçš„å½±å“ï¼Œå› æ­¤éœ€è¦æ·±å…¥å­¦ä¹ ã€‚

* æ¨¡æ¿1é‡‡ç”¨çš„æ˜¯**å·¦é—­å³é—­**ï¼Œå³`[left, right]`

* æ¨¡æ¿2é‡‡ç”¨çš„æ˜¯**å·¦é—­å³å¼€**ï¼Œå³`[left, right)`

è¿™ä¸¤ç§æ–¹å¼çš„è¾¹ç•Œå–å€¼ä¸ä¸€æ ·ï¼Œä»è€Œwhileå¾ªç¯çš„åˆ¤æ–­æ¡ä»¶ã€è¾¹ç•Œæ›´æ–°ä¸ä¸€æ ·ã€‚ä¸¤ç§æ–¹å¼åœ¨ä¹‹åçš„ä¹ é¢˜ä¸­å‡æœ‰åº”ç”¨ï¼Œéœ€è¦ç»“åˆé¢˜ç›®ç†è§£ã€‚

```java
//æ¨¡æ¿1
class Solution {
    public int search(int[] nums, int target) {
        int left = 0, right = nums.length-1, mid = 0;
        while (left <= right){
            mid = (right - left)/2 + left;
            if(nums[mid] == target) {
                return mid;
            }else if(nums[mid] < target) {
                left = mid + 1;
            }else {
                right = mid - 1;
            }
        }
        return -1;
    }
}
//æ¨¡æ¿2
class Solution {
    public int search(int[] nums, int target) {
        int left = 0, right = nums.length, mid = 0;
        while (left < right){
            mid = (right - left)/2 + left;
            if(nums[mid] == target) {
                return mid;
            }else if(nums[mid] < target) {
                left = mid + 1;
            }else {
                right = mid;
            }
        }
        return -1;
    }
}
```



### [34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/)

ç»™å®šä¸€ä¸ªæŒ‰ç…§å‡åºæ’åˆ—çš„æ•´æ•°æ•°ç»„ numsï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ targetã€‚æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„**å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®**ã€‚ä½ çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯Â **O(log n)** çº§åˆ«ã€‚å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ï¼Œè¿”å›Â [-1, -1]ã€‚

```
ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 8
è¾“å‡ºï¼š[3,4]

ç¤ºä¾‹Â 2ï¼š
è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 6
è¾“å‡ºï¼š[-1,-1]
```

åˆ†æï¼šé¦–å…ˆæŒ‰ç…§å¸¸è§„çš„äºŒåˆ†æŸ¥æ‰¾æ€è·¯æ¥æŸ¥è¯¢ç›®æ ‡å€¼ï¼Œå½“æŸ¥è¯¢åˆ°ç›®æ ‡å€¼ä¹‹åï¼Œå…ˆåˆ¤æ–­è¯¥ä½ç½®æ˜¯å¦æ˜¯æ•°ç»„çš„è¾¹ç•Œï¼Œå¦‚æœæ˜¯ï¼Œè¯´æ˜è¯¥ä½ç½®å°±æ˜¯ç›®æ ‡å€¼çš„å¼€å§‹ä½ç½®ï¼ˆæˆ–ç»“æŸä½ç½®ï¼‰ï¼›å¦‚æœä¸æ˜¯ï¼Œåˆ™ç»§ç»­å‘ä¸¤è¾¹æ‰§è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚è¿™é‡Œåˆ†åˆ«ä½¿ç”¨ä¸¤ä¸ªå‡½æ•°`findFirst()` å’Œ `findLast()` æ¥æŸ¥æ‰¾æ•°ç»„çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚

```java
// æ—¶é—´å¤æ‚åº¦ï¼šO(log n) --> ä¸¤ä¸ªå­é—®é¢˜éƒ½æ˜¯äºŒåˆ†æŸ¥æ‰¾
// ç©ºé—´å¤æ‚åº¦ï¼šO(1)
class Solution {
    public int[] searchRange(int[] nums, int target) {
        int start = findFirst(nums, target);
        if(start == -1) {
            return new int[]{-1, -1};
        }
        int end = findLast(nums, target);
        return new int[]{start, end};
    }
    private int findFirst(int[] nums, int target) {
        int left = 0, right = nums.length - 1, mid = 0;
        while (left <= right){
            mid = (right - left)/2 + left;
            if(target == nums[mid]) {
                // åˆ¤æ–­è¾¹ç•Œ
                if(mid == 0 || (mid > 0 && nums[mid-1] != nums[mid])) {
                    return mid;
                }else {
                    right = mid - 1;
                }
            }else if(nums[mid] < target) {
                left = mid + 1;
            }else {
                right = mid - 1;
            }
        }
        return -1;
    }
    private int findLast(int[] nums, int target) {
        int left = 0, right = nums.length - 1, mid = 0;
        while (left <= right){
            mid = (right - left)/2 + left;
            if(target == nums[mid]) {
                // åˆ¤æ–­è¾¹ç•Œ
                if(mid == nums.length - 1 || (mid < nums.length - 1 && nums[mid+1] != nums[mid])) {
                    return mid;
                }else {
                    left = mid + 1;
                }
            }else if(nums[mid] < target) {
                left = mid + 1;
            }else {
                right = mid - 1;
            }
        }
        return -1;
    }
}
```



### [35. æœç´¢æ’å…¥ä½ç½®](https://leetcode-cn.com/problems/search-insert-position/)

ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚

ä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­æ— é‡å¤å…ƒç´ ã€‚

```
ç¤ºä¾‹ 1:
è¾“å…¥: [1,3,5,6], 5
è¾“å‡º: 2

ç¤ºä¾‹ 2:
è¾“å…¥: [1,3,5,6], 2
è¾“å‡º: 1

ç¤ºä¾‹ 3:
è¾“å…¥: [1,3,5,6], 7
è¾“å‡º: 4

ç¤ºä¾‹ 4:
è¾“å…¥: [1,3,5,6], 0
è¾“å‡º: 0
```

åˆ†æï¼šç•¥

```java
class Solution {
    public int searchInsert(int[] nums, int target) {
        int left = 0, right = nums.length-1, mid = 0;
        while (left <= right){
            mid = (right - left)/2 + left;
            if(target == nums[mid]) {
                return mid;
            }else if(nums[mid] < target) {
                left = mid + 1;
            }else {
                right = mid - 1;
            }
        }
        return left;
    }
}
```



### [33. æœç´¢æ—‹è½¬æœ‰åºæ•°ç»„](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œå’Œä¸€ä¸ªæ•´æ•° target ã€‚

è¯¥æ•´æ•°æ•°ç»„åŸæœ¬æ˜¯æŒ‰å‡åºæ’åˆ—ï¼Œä½†è¾“å…¥æ—¶åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ã€‚ï¼ˆä¾‹å¦‚ï¼Œæ•°ç»„ [0,1,2,4,5,6,7] å¯èƒ½å˜ä¸º [4,5,6,7,0,1,2] ï¼‰ã€‚è¯·ä½ åœ¨æ•°ç»„ä¸­æœç´¢ target ï¼Œå¦‚æœæ•°ç»„ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ï¼Œåˆ™è¿”å›å®ƒçš„ç´¢å¼•ï¼Œå¦åˆ™è¿”å› -1 ã€‚å‡è®¾æ•°ç»„ä¸­**ä¸å­˜åœ¨é‡å¤çš„å…ƒç´ **ã€‚ç®—æ³•æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯ **O(log n)** çº§åˆ«ã€‚

```
ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 0
è¾“å‡ºï¼š4

ç¤ºä¾‹ 2ï¼š
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 3
è¾“å‡ºï¼š-1
```

åˆ†æï¼šä¸€èˆ¬æ¥è¯´ï¼Œæ—¶é—´å¤æ‚åº¦è¦æ±‚O(log n)çº§åˆ«çš„ï¼Œå³æš—ç¤ºæˆ‘ä»¬è€ƒè™‘äºŒåˆ†æ³•ã€‚

å¯¹äºæ—‹è½¬æœ‰åºæ•°ç»„ nums ï¼Œå¯åˆ†ä¸ºä¸¤ä¸ªæœ‰åºæ•°ç»„ nums1 å’Œ nums2ï¼Œå¹¶ä¸” nums1ä»»ä¸€å…ƒç´  >= nums2ä»»ä¸€å…ƒç´ ã€‚é‡‡ç”¨äºŒåˆ†æ³•ï¼Œä»¤ left å’Œ right åˆå§‹åŒ–ä¸º0 å’Œ length-1ï¼Œmid ä¸ºæ¯æ¬¡äºŒåˆ†çš„ä¸­ç‚¹ï¼Œæ˜¾ç„¶ï¼Œmid ä¸æ˜¯è½åœ¨åŒºé—´ nums1 ä¸­ï¼Œå°±æ˜¯è½åœ¨åŒºé—´ nums2 ä¸­ï¼Œè¿™é‡Œä»¥ nums[mid] å’Œ nums[right] æ¯”è¾ƒè¿›è¡Œè¯´æ˜ã€‚

* è‹¥ `nums[mid] < nums[right]`ï¼Œè¯´æ˜`[mid, right]`æ˜¯æœ‰åºçš„ã€‚è€Œ**ç›®æ ‡å€¼å¯èƒ½è½åœ¨ `[mid, right]`è¿™ä¸ªæœ‰åºåŒºé—´å†…ï¼Œä¹Ÿå¯èƒ½è½åœ¨åŒºé—´`[left, mid-1]` å†…**ã€‚æˆ‘ä»¬å…ˆåˆ¤æ–­`target`æ˜¯å¦è½åœ¨æœ‰åºåŒºé—´` [mid, right] `å†…ï¼Œå› ä¸ºè¿™ä¸ªåˆ¤æ–­æ¡ä»¶å¥½å†™ï¼›è€ŒåŒºé—´ `[left, mid]` å†…çš„å€¼æœ‰å¯èƒ½æ˜¯å…ˆå¢åå‡çš„ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡`target`ä¸è¾¹ç•Œå€¼è¿›è¡Œæ¯”è¾ƒæ¥åˆ¤æ–­ã€‚
  * å¦‚æœ `target` è½åœ¨` [mid, right]`è¿™ä¸ªæœ‰åºåŒºé—´å†…ï¼ˆåˆ¤æ–­æ¡ä»¶ä¸º `nums[mid]<target && target<=nums[right]`ï¼‰ï¼Œåˆ™è°ƒæ•´ `left = mid+1`;
  * åä¹‹ï¼Œè°ƒæ•´ `right = mid-1`;
* åä¹‹ï¼Œè¯´æ˜`[left, mid]`æ˜¯æœ‰åºçš„ã€‚è€Œç›®æ ‡å€¼` target` å¯èƒ½è½åœ¨ `[left, mid]`è¿™ä¸ªæœ‰åºåŒºé—´å†…ï¼Œä¹Ÿå¯èƒ½è½åœ¨åŒºé—´ `[mid+1, right]`å†…ã€‚
  * å¦‚æœ `target` è½åœ¨ `[left, mid]` å†…ï¼ˆåˆ¤æ–­æ¡ä»¶ä¸º`nums[left]<=target && target<nums[mid]`ï¼‰ï¼Œåˆ™è°ƒæ•´`right = mid-1`ï¼›
  * åä¹‹ï¼Œ`target` è½åœ¨` [mid+1, right]`å†…ï¼Œè°ƒæ•´ `left = mid+1`ã€‚

éœ€è¦è€ƒè™‘å¦‚ä¸‹å‡ ä¸ªcaseï¼š

```
nums = [2,1], target = 1
nums = [2,1], target = 3
```

ä»£ç å®ç°ï¼š

```java
// æ—¶é—´å¤æ‚åº¦ï¼šO(log n)
class Solution {
    public int search(int[] nums, int target) {
        int left = 0, right = nums.length - 1, mid = 0;
        while(left <= right) {
            mid = (right - left) / 2 + left;
            if(nums[mid] == target) {
                return mid;
            }
            if(nums[mid] < nums[right]) { // nums[mid...right]å±€éƒ¨æœ‰åº
                if(nums[mid] < target && target <= nums[right]) left = mid + 1;
                else right = mid - 1;
            }else {                       // nums[left...mid]å±€éƒ¨æœ‰åº
                if(nums[left] <= target && target < nums[mid]) right = mid - 1;
                else left = mid + 1;
            }
        }
        return -1;
    }
}
```



### [81. æœç´¢æ—‹è½¬æœ‰åºæ•°ç»„â…¡](https://leetcode-cn.com/problems/search-in-rotated-sorted-array-ii/)

å‡è®¾æŒ‰ç…§å‡åºæ’åºçš„æ•°ç»„åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ã€‚ ä¾‹å¦‚ï¼Œæ•°ç»„ [0,0,1,2,2,5,6] å¯èƒ½å˜ä¸º [2,5,6,0,0,1,2] 

ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ç»™å®šçš„ç›®æ ‡å€¼æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¸­ã€‚è‹¥å­˜åœ¨è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚

```
ç¤ºä¾‹ 1:
è¾“å…¥: nums = [2,5,6,0,0,1,2], target = 0
è¾“å‡º: true

ç¤ºä¾‹ 2:
è¾“å…¥: nums = [2,5,6,0,0,1,2], target = 3
è¾“å‡º: false
```

è¿›é˜¶ï¼šæœ¬é¢˜ä¸­çš„ nums  å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ã€‚
**è¿™ä¼šå½±å“åˆ°ç¨‹åºçš„æ—¶é—´å¤æ‚åº¦å—ï¼Ÿä¼šæœ‰æ€æ ·çš„å½±å“ï¼Œä¸ºä»€ä¹ˆï¼Ÿ**

åˆ†æï¼šæŒ‰ç…§ç¬¬33é¢˜çš„é€»è¾‘ï¼Œæœ€å¼€å§‹ï¼Œæˆ‘æ˜¯è¿™ä¹ˆå†™çš„ï¼š

```java
class Solution {
    public boolean search(int[] nums, int target) {
        int left = 0, right = nums.length - 1, mid = 0;
        while(left <= right) {
            mid = (right - left) / 2 + left;
            if(nums[mid] == target) {
                return true;
            }
            if(nums[mid] <= nums[right]) { // è¯­å¥1
                if(nums[mid] < target && target <= nums[right]) left = mid + 1;
                else right = mid - 1;
            }else {                       
                if(nums[left] <= target && target < nums[mid]) right = mid - 1;
                else left = mid + 1;
            }
        }
        return false;
    }
}
```

æˆ‘åªåœ¨è¯­å¥1ä¸­ç”±åŸæ¥çš„`nums[mid] < nums[right]`æ”¹ä¸º`nums[mid] <= nums[right]`ï¼Œæäº¤åå‡ºç°å¦‚ä¸‹è¿™ä¸ªcaseè¿‡ä¸å»ï¼š

```
nums   = [1,1,3,1]
target = 3
```

è€Œç†è§£è¿™ä¸ªcaseæ­£æ˜¯è§£å†³æœ¬é¢˜çš„å…³é”®ã€‚

ç”±äºæ•°ç»„ä¸­å­˜åœ¨é‡å¤å…ƒç´ ï¼Œå› æ­¤ï¼Œä¸èƒ½ç…§æ¬ç¬¬33é¢˜çš„é€»è¾‘ï¼ˆè™½ç„¶æˆ‘è€ƒè™‘äº†å…ƒç´ ç›¸ç­‰çš„æƒ…å†µï¼Œä½†è€ƒè™‘çš„è¿˜æ˜¯ä¸å…¨é¢ï¼‰ã€‚è¿™ä¸ªcaseè¡¨æ˜ï¼Œ**å³ä½¿`nums[mid] <= nums[right]`ï¼Œä¹Ÿä¸èƒ½æ˜ç¡®è¯´åŒºé—´`[mid, right]`æ˜¯æœ‰åºçš„**ã€‚ç”±äºæˆ‘åœ¨åšè¿™ç±»é¢˜æ—¶ï¼Œæ€»æ˜¯ä¼˜å…ˆè€ƒè™‘å³åŠåŒºé—´ï¼Œå› æ­¤åœ¨æœ¬é¢˜ä¸­ï¼Œå¦‚æœå­˜åœ¨`nums[mid] == nums[right]`ï¼Œå…ˆçº¿æ€§çš„ç¼©å°`right`çš„èŒƒå›´ï¼Œä»è€Œå†™å‡ºå¦‚ä¸‹ä»£ç ã€‚åªæœ‰å½“`nums[mid]` å’Œ`nums[right]`æ˜¯ä¸ç­‰çš„ï¼Œæ‰èƒ½ä¿è¯åŒºé—´`[mid, right]`æ˜¯æœ‰åºçš„ã€‚

```java
// æ—¶é—´å¤æ‚åº¦ï¼šbest->O(logn); worst->O(n)
class Solution {
    public boolean search(int[] nums, int target) {
        int left = 0, right = nums.length - 1, mid = 0;
        while(left <= right) {
            mid = (right - left) / 2 + left;
            if(nums[mid] == target) {
                return true;
            }
            if(nums[mid] == nums[right]) { // ä¸ç¬¬33é¢˜å”¯ä¸€çš„åŒºåˆ«
                right--;
            }else if(nums[mid] < nums[right]) { // nums[mid...right]å±€éƒ¨æœ‰åº
                if(nums[mid] < target && target <= nums[right]) left = mid + 1;
                else right = mid - 1;
            }else {                             // nums[left...mid]å±€éƒ¨æœ‰åº
                if(nums[left] <= target && target < nums[mid]) right = mid - 1;
                else left = mid + 1;
            }
        }
        return false;
    }
}
```



### [153. å¯»æ‰¾æ—‹è½¬æœ‰åºæ•°ç»„ä¸­çš„æœ€å°å€¼](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/)

å‡è®¾æŒ‰ç…§å‡åºæ’åºçš„æ•°ç»„åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ã€‚ä¾‹å¦‚ï¼Œæ•°ç»„ [0,1,2,4,5,6,7] å¯èƒ½å˜ä¸º [4,5,6,7,0,1,2] ã€‚å‡è®¾æ•°ç»„ä¸­**ä¸å­˜åœ¨é‡å¤çš„å…ƒç´ **ã€‚è¯·æ‰¾å‡ºå…¶ä¸­æœ€å°çš„å…ƒç´ ã€‚

```
ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼šnums = [3,4,5,1,2]
è¾“å‡ºï¼š1

ç¤ºä¾‹ 2ï¼š
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2]
è¾“å‡ºï¼š0
```

åˆ†æï¼šæ—‹è½¬æ’åºæ•°ç»„ nums å¯ä»¥è¢«æ‹†åˆ†ä¸º 2 ä¸ªæ’åºæ•°ç»„ nums1, nums2ï¼Œå¹¶ä¸” nums1ä»»ä¸€å…ƒç´  >= nums2ä»»ä¸€å…ƒç´ ï¼›å› æ­¤ï¼Œè€ƒè™‘äºŒåˆ†æ³•å¯»æ‰¾æ­¤ä¸¤æ•°ç»„çš„åˆ†ç•Œç‚¹ nums[i] (å³**ç¬¬ 2 ä¸ªæ•°ç»„çš„é¦–ä¸ªå…ƒç´ **)ã€‚
è®¾ç½®`left`ï¼Œ`right`æŒ‡é’ˆåœ¨ numsæ•°ç»„ä¸¤ç«¯ï¼Œ`mid`ä¸ºæ¯æ¬¡äºŒåˆ†çš„ä¸­ç‚¹ï¼š

- å½“`nums[mid]<nums[right]`æ—¶ï¼Œè¯´æ˜`[mid,right]`ä¸ºéƒ¨åˆ†é€’å¢åºåˆ—ï¼Œé‚£ä¹ˆæœ€å°å€¼è‚¯å®šä¸ä¼šå‡ºç°åœ¨åŒºé—´`(mid,right]`å†…ï¼ˆè¿™é‡Œæ˜¯å·¦å¼€åˆé—­åŒºé—´å“¦~ï¼‰ï¼Œæ³¨æ„ï¼Œå…ƒç´ `nums[mid]`å¯èƒ½æ˜¯æœ€å°å€¼ã€‚å› æ­¤æ›´æ–°å³è¾¹ç•Œï¼Œå³`right = mid`ï¼›
- å½“`nums[mid]>nums[right]`æ—¶ï¼Œè¯´æ˜`[left,mid]`ä¸ºéƒ¨åˆ†é€’å¢åºåˆ—ï¼Œè€ŒåŒºé—´`(mid,right]`å†…å¿…ç„¶ä¼šå‡ºç°è½¬æŠ˜ç‚¹ï¼Œå³æœ€å°å€¼ä¼šå‡ºç°åœ¨`(mid,right]`åŒºé—´å†…ã€‚å› æ­¤æ›´æ–°å·¦è¾¹ç•Œï¼Œå³`left = mid + 1`ã€‚

```java
// æ—¶é—´å¤æ‚åº¦ï¼šO(log n)
class Solution {
    public int findMin(int[] nums) {
        int left = 0, right = nums.length - 1, mid = 0;
        while(left < right) {
            mid = (right - left) / 2 + left;
            if(nums[mid] < nums[right]) { // [mid,right]ä¸ºé€’å¢åºåˆ—
                right = mid;
            }else {                       // [left,mid]ä¸ºé€’å¢åºåˆ—
                left = mid + 1;
            }
        }
        return nums[left];
    }
}
```



### [154. å¯»æ‰¾æ—‹è½¬æœ‰åºæ•°ç»„ä¸­çš„æœ€å°å€¼â…¡](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array-ii/)

å‡è®¾æŒ‰ç…§å‡åºæ’åºçš„æ•°ç»„åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ã€‚ä¾‹å¦‚ï¼Œæ•°ç»„ [0,1,2,4,5,6,7] å¯èƒ½å˜ä¸º [4,5,6,7,0,1,2] ã€‚

è¯·æ‰¾å‡ºå…¶ä¸­æœ€å°çš„å…ƒç´ ã€‚æ³¨æ„æ•°ç»„ä¸­**å¯èƒ½å­˜åœ¨é‡å¤çš„å…ƒç´ **ã€‚

```
ç¤ºä¾‹ 1ï¼š
è¾“å…¥: [2,2,2,0,1]
è¾“å‡º: 0
```

åˆ†æï¼š154é¢˜å¯¹æ¯”ä¸153é¢˜çš„ä¿®æ”¹ï¼Œç­‰ä»·äº81é¢˜å¯¹æ¯”ä¸33é¢˜çš„ä¿®æ”¹ã€‚

```java
// æ—¶é—´å¤æ‚åº¦ï¼šbest->O(log n); worst->O(n)
class Solution {
    public int findMin(int[] nums) {
        int left = 0, right = nums.length - 1, mid = 0;
        while(left < right) {
            mid = (right - left) / 2 + left;
            if(nums[mid] == nums[right]) {
                right--;
            }else if(nums[mid] < nums[right]) { // [mid,right]ä¸ºé€’å¢åºåˆ—
                right = mid;
            }else {                             // [left,mid]ä¸ºé€’å¢åºåˆ—
                left = mid + 1;
            }
        }
        return nums[left];
    }
}
```



### [74. æœç´¢äºŒç»´çŸ©é˜µ](https://leetcode-cn.com/problems/search-a-2d-matrix/)

ç¼–å†™ä¸€ä¸ªé«˜æ•ˆçš„ç®—æ³•æ¥åˆ¤æ–­Â m x nÂ çŸ©é˜µä¸­ï¼Œæ˜¯å¦å­˜åœ¨ä¸€ä¸ªç›®æ ‡å€¼ã€‚è¯¥çŸ©é˜µå…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š

* æ¯è¡Œä¸­çš„æ•´æ•°ä»å·¦åˆ°å³æŒ‰å‡åºæ’åˆ—ã€‚
* **æ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•´æ•°å¤§äºå‰ä¸€è¡Œçš„æœ€åä¸€ä¸ªæ•´æ•°ã€‚**

```
è¾“å…¥ï¼šmatrix = [[1,3,5,7],[10,11,16,20],[23,30,34,50]], target = 3
è¾“å‡ºï¼štrue
```

åˆ†æï¼šç”±äºâ€œæ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•´æ•°å¤§äºå‰ä¸€è¡Œçš„æœ€åä¸€ä¸ªæ•´æ•°â€ï¼Œæ‰€ä»¥å¯ä»¥æŠŠäºŒç»´çŸ©é˜µå½“ä½œä¸€ç»´æ•°ç»„æ¥çœ‹ï¼Œåšæ³•ä¹Ÿä¸€æ¨¡ä¸€æ ·ï¼Œåªæ˜¯å¤šäº†ä¸€æ­¥â€œä¸€ç»´åæ ‡è½¬åŒ–æˆäºŒç»´åæ ‡â€çš„è¿‡ç¨‹ã€‚

```java
// æ—¶é—´å¤æ‚åº¦ï¼šO(log(m*n))
// ç©ºé—´å¤æ‚åº¦ï¼šO(1)
class Solution {
    public boolean searchMatrix(int[][] matrix, int target) {
        int m = matrix.length;
        if(m == 0) return false;
        int n = matrix[0].length;
        int left = 0, right = m*n-1, mid = 0;
        while(left <= right) {
            mid = (right - left) / 2 + left;
            // ä¸€ç»´åæ ‡è½¬åŒ–ä¸ºäºŒç»´åæ ‡
            int row = mid / n;
            int col = mid % n;
            if(matrix[row][col] == target) {
                return true;
            }else if(matrix[row][col] < target) {
                left = mid + 1;
            }else {
                right = mid - 1;
            }
        }
        return false;
    }
}
```



### [240. æœç´¢äºŒç»´çŸ©é˜µ II](https://leetcode-cn.com/problems/search-a-2d-matrix-ii/)

ç¼–å†™ä¸€ä¸ªé«˜æ•ˆçš„ç®—æ³•æ¥æœç´¢Â mÂ xÂ nÂ çŸ©é˜µ matrix ä¸­çš„ä¸€ä¸ªç›®æ ‡å€¼ targetã€‚è¯¥çŸ©é˜µå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š

* æ¯è¡Œçš„å…ƒç´ ä»å·¦åˆ°å³å‡åºæ’åˆ—ã€‚
* **æ¯åˆ—çš„å…ƒç´ ä»ä¸Šåˆ°ä¸‹å‡åºæ’åˆ—ã€‚ï¼ˆåŒºåˆ«äºä¸Šä¸€é¢˜ï¼‰**

```
ç¤ºä¾‹ï¼š
[
  [1,   4,  7, 11, 15],
  [2,   5,  8, 12, 19],
  [3,   6,  9, 16, 22],
  [10, 13, 14, 17, 24],
  [18, 21, 23, 26, 30]
]
```

åˆ†æï¼šé¦–å…ˆï¼Œæˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªæŒ‡å‘çŸ©é˜µå·¦ä¸‹è§’çš„ (rowï¼Œcol) æŒ‡é’ˆã€‚**å¦‚æœå½“å‰æŒ‡å‘çš„å€¼å¤§äºç›®æ ‡å€¼ï¼Œåˆ™â€œå‘ä¸Šâ€ ç§»åŠ¨ä¸€è¡Œï¼›å¦‚æœå½“å‰æŒ‡å‘çš„å€¼å°äºç›®æ ‡å€¼ï¼Œåˆ™â€œå‘å³â€ç§»åŠ¨ä¸€åˆ—**ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(m+n)ï¼Œè™½ç„¶ä»æ—¶é—´å¤æ‚åº¦æ¥çœ‹ä¸æ˜¯æœ€ä¼˜çš„ï¼Œä½†ä¸€å®šæ˜¯æœ€ç®€æ´çš„ã€‚ï¼ˆå‚è€ƒè‡ªå®˜æ–¹é¢˜è§£ï¼‰

```java
// æ—¶é—´å¤æ‚åº¦ï¼šO(m+n)
// ç©ºé—´å¤æ‚åº¦ï¼šO(1)
class Solution {
    public boolean searchMatrix(int[][] matrix, int target) {
        int m = matrix.length;
        if (m == 0) return false;
        int n = matrix[0].length;
        // èµ·ç‚¹åˆå§‹åŒ–ä¸ºçŸ©é˜µçš„å·¦ä¸‹è§’
        int row = m - 1, col = 0;
        while (row >= 0 && col < n) {
            if (matrix[row][col] == target) return true;
            else if (matrix[row][col] > target) row--;
            else col++;
        }
        return false;
    }
}
```

æ³¨ï¼š`O(m+n)`çš„æ—¶é—´å¤æ‚åº¦å¹¶ä¸æ˜¯æœ€ä¼˜çš„ï¼Œä¹Ÿæ²¡æœ‰åˆ©ç”¨â€œäºŒåˆ†â€çš„æ€æƒ³ï¼Œä½†ä»£ç ç¡®å®æ˜¯æœ€ç®€æ´çš„ã€‚

å…³äºæœ¬é¢˜ï¼Œæ›´è¯¦å°½çš„å¯å‚è€ƒï¼šhttps://stackoverflow.com/questions/2457792/how-do-i-search-for-a-number-in-a-2d-array-sorted-left-to-right-and-top-to-botto/2458113



### [69. x çš„å¹³æ–¹æ ¹](https://leetcode-cn.com/problems/sqrtx/) 

å®ç° `int sqrt(int x)` å‡½æ•°ã€‚

è®¡ç®—å¹¶è¿”å› x çš„å¹³æ–¹æ ¹ï¼Œå…¶ä¸­ x æ˜¯éè´Ÿæ•´æ•°ã€‚

ç”±äºè¿”å›ç±»å‹æ˜¯æ•´æ•°ï¼Œç»“æœåªä¿ç•™æ•´æ•°çš„éƒ¨åˆ†ï¼Œå°æ•°éƒ¨åˆ†å°†è¢«èˆå»ã€‚

```
ç¤ºä¾‹ 1:
è¾“å…¥: 4
è¾“å‡º: 2

ç¤ºä¾‹ 2:
è¾“å…¥: 8
è¾“å‡º: 2
è¯´æ˜: 8 çš„å¹³æ–¹æ ¹æ˜¯ 2.82842..., ç”±äºè¿”å›ç±»å‹æ˜¯æ•´æ•°ï¼Œå°æ•°éƒ¨åˆ†å°†è¢«èˆå»ã€‚
```

åˆ†æï¼šåˆ†åˆ«ç”¨äºŒåˆ†æ³•å’Œç‰›é¡¿æ³•æ¥è®¡ç®—ã€‚å…³æ³¨ç»†èŠ‚é—®é¢˜ï¼Œæ¯”å¦‚åœ¨ä¸¤ä¸ªint å‹æ•´æ•°ç›¸ä¹˜æ—¶ï¼Œéœ€è¦æŠŠ`int`è½¬æ¢æˆ`long`ï¼Œä»¥æ­¤é˜²æ­¢ç»“æœæº¢å‡ºã€‚ 

æ–¹æ³•1ï¼šç‰›é¡¿è¿­ä»£æ³•

ä»¤`f(x)=x^2 - num` ï¼Œæˆ‘ä»¬è¦è®¾æ³•æ‰¾åˆ°ä¸€ä¸ªæ•´æ•°æ ¹ã€‚æˆ‘ä»¬å‡å®šä»`x_k`å¼€å§‹ï¼Œä¸æ–­å‘æœ€åçš„è§£é€¼è¿‘ï¼ˆé€¼è¿‘åœ¨ç¼–ç æ—¶å°±æ˜¯ä¸€æ¬¡è¿­ä»£ï¼‰ã€‚æ€ä¹ˆé€¼è¿‘å‘¢ï¼Ÿè¿‡ç¨‹å¦‚ä¸‹ï¼š

```
å‡è®¾å½“å‰çš„å€¼ä¸º x_kï¼Œå‡½æ•° f(x) åœ¨è¯¥ç‚¹ (x_k, f(x_k)) å¤„çš„åˆ‡çº¿ä¸ x è½´äº¤ç‚¹çš„æ¨ªåæ ‡ä¸º x_k+1
æ–œç‡ç­‰äºï¼šf(x_k)/(x_k - x_k+1) = f'(x_k)    -- ç­‰å¼1
ç”±äº
f(x_k) = x_k^2 - num                       -- ç­‰å¼2
f'(x_k) = 2*x_k                            -- ç­‰å¼3
æŠŠç­‰å¼2ï¼Œ3ä»£å…¥ç­‰å¼1ï¼Œè®¡ç®—å¾—åˆ° x_k+1 å’Œ x_k çš„å…³ç³» ï¼ˆæœ€ç®€å•çš„äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ï¼‰ï¼Œå¦‚ä¸‹ï¼š
x_k+1 = (x_k + num/x_k) / 2
è€Œè¿™ï¼Œä¹Ÿå°±æ˜¯è¿­ä»£å¼ã€‚
```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9waWMubGVldGNvZGUtY24uY29tL0ZpZ3VyZXMvMzY3L3BhcmFib2xhNC5wbmc?x-oss-process=image/format,png)

è¯„è®ºåŒºæ‰¾åˆ°ä¸€ä¸ªåŠ¨å›¾

![img](https://pic.leetcode-cn.com/e6550b4a77fbe722a9a4634619ece70e8b7e60ef7eb2e5b7af7bba3037308879-file_1563817671864)

ä»£ç ï¼š

```java
// å¦‚æœæ˜¯è¦è¿”å›å°½é‡ç²¾ç¡®çš„å€¼
public double mySqrt(int x) {
    if(x == 0) return 0;
    double x0 = x;
    double x1 = (x0 + x/x0)/2;
    // 1e-6 æ˜¯ç§‘å­¦è®¡æ•°æ³•ï¼Œè¡¨ç¤º 1*10^(-6)ï¼Œä¹Ÿå°±æ˜¯ 0.000001
    // ç”¨æ¥æŠµæ¶ˆæµ®ç‚¹è¿ç®—ä¸­å› ä¸ºè¯¯å·®é€ æˆçš„ç›¸ç­‰æ— æ³•åˆ¤æ–­çš„æƒ…å†µï¼Œå®ƒé€šå¸¸æ˜¯ä¸€ä¸ªéå¸¸å°çš„æ•°å­—ï¼Œ
    // å…·ä½“å¤šå°è¦æ ¹æ®è¦æ±‚çš„ç²¾åº¦æ¥è®¾ç½®
    double precision = 1e-6;
    while (Math.abs(x1 - x0) > precision){
        x0 = x1;
        x1 = (x0 + x/x0)/2;
    }
    return x1;
}

// æœ¬é¢˜ä¸­ï¼Œåªéœ€è¿”å›æ•´æ•°éƒ¨åˆ†ï¼Œå› æ­¤æ²¡å¿…è¦æŠŠç²¾åº¦è®¾ç½®å¾—è¿™ä¹ˆå°ï¼Œè®¾ç²¾åº¦ä¸º1å³å¯
public int mySqrt(int x) {
    if(x == 0) return 0;
    double x0 = x;
    double x1 = (x0 + x/x0)/2;
    while (Math.abs(x1 - x0) >= 1){
        x0 = x1;
        x1 = (x0 + x/x0)/2;
    }
    return (int)x1;
}
```

æ–¹æ³•2ï¼šäºŒåˆ†æ³•

```java
// å¦‚æœè¦æ±‚è¿”å›ç²¾ç¡®å€¼
public double mySqrt(int x) {
    if (x == 0 || x == 1) return x;
    double left = 1.0, mid = 0.0, right = x, diff = 0.0000001;
    while (right - left > diff) {
        mid = (right - left) / 2 + left;
        double t = mid * mid;
        if (t - x > 0.0) right = mid;
        else if(t - x < 0.0) left = mid;
        else break;
    }
    return right;
}

// æœ¬é¢˜
public int mySqrt(int x) {
    if (x == 0) return x;
    long tempSquare;
    int left = 1, right = x, mid;
    while (left <= right) {
        mid = (right - left) / 2 + left;
        tempSquare = (long)mid * mid; // æ³¨æ„ï¼šå†™æˆ tempSquare = mid*mid; ä¼šæº¢å‡ºï¼Œéå¸¸ç»†èŠ‚~
        if (tempSquare > x) right = mid-1;
        else if (tempSquare < x) left = mid+1;
        else return mid;
    }
    return right;
}
```



### [367. æœ‰æ•ˆçš„å®Œå…¨å¹³æ–¹æ•°](https://leetcode-cn.com/problems/valid-perfect-square/)

ç»™å®šä¸€ä¸ªæ­£æ•´æ•° *num*ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœ *num* æ˜¯ä¸€ä¸ªå®Œå…¨å¹³æ–¹æ•°ï¼Œåˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚

æ–¹æ³•ä¸€ï¼šç‰›é¡¿è¿­ä»£æ³•

```java
/**
 * ç‰›é¡¿è¿­ä»£æ³•
 * æ—¶é—´å¤æ‚åº¦ï¼šO(log n)ï¼Œè¿™ä¸ªæ—¶é—´å¤æ‚åº¦æ€ä¹ˆç®—çš„ï¼Ÿ
 */
class Solution {
    public boolean isPerfectSquare(int num) {
        if (num == 1) return true;
        long x = num / 2; // å†™æˆint x=num/2 ä¼šå‡ºé”™ï¼Œæ„è¯†åˆ°è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼
        while (x * x > num) {
            x = (x + num / x) / 2;
        }
        return x * x == num;
    }
}
```

æ–¹æ³•äºŒï¼šäºŒåˆ†æ³•

```java
// æ—¶é—´å¤æ‚åº¦ï¼šO(log n)
class Solution {
    public boolean isPerfectSquare(int num) {
        // ä½¿ç”¨ long æ˜¯ä¸ºäº†åœ¨ mid * mid æ—¶é¿å…æº¢å‡º 
        long left = 1, right = num, mid = 0, tempSquare = 0;
        while (left <= right) {
            mid = (right - left)/2 + left;
            tempSquare = mid * mid;
            if(tempSquare > num) right = mid - 1;
            else if(tempSquare < num) left = mid + 1;
            else return true;
        }
        return false;
    }
}
```



### [50. Pow(x, n)](https://leetcode-cn.com/problems/powx-n/)

å®ç° `pow(x, n)` ï¼Œå³è®¡ç®— x çš„ n æ¬¡å¹‚å‡½æ•°ã€‚

è¯´æ˜:

* -100.0 < x < 100.0
* n æ˜¯ 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå…¶æ•°å€¼èŒƒå›´æ˜¯ [âˆ’2^31, 2^31 âˆ’ 1] ã€‚

```
ç¤ºä¾‹ 1:
è¾“å…¥: 2.00000, 10
è¾“å‡º: 1024.00000

ç¤ºä¾‹ 2:
è¾“å…¥: 2.10000, 3
è¾“å‡º: 9.26100

ç¤ºä¾‹ 3:
è¾“å…¥: 2.00000, -2
è¾“å‡º: 0.25000
```

åˆ†æï¼šæœ¬é¢˜ä¹Ÿæ˜¯äºŒåˆ†æ³•çš„ä¸€ä¸ªå…¸å‹ä¾‹é¢˜ã€‚å‡è®¾F(x,n)è¡¨ç¤ºx^nï¼Œé‚£ä¹ˆï¼š

* å½“nä¸ºå¶æ•°æ—¶ï¼ŒF(x, n) = F(x, n/2) * F(x, n/2)
* å½“nä¸ºå¥‡æ•°æ—¶ï¼ŒF(x, n) = F(x, n/2) * F(x, n/2) * x

ä½†éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œåƒä¸‹é¢è¿™ä¹ˆå†™æ˜¯ä¼šå‡ºé”™çš„ï¼è¿™ç§è¾¹ç•Œæƒ…å†µä¸€å®šéœ€è¦æ³¨æ„ã€‚

```java
// é”™è¯¯ç¤ºä¾‹~
class Solution {
    public double myPow(double x, int n) {
        if(x == 1.0 || n == 0) {
            return 1.0;
        }
        if(n < 0) {
            return 1.0 / myPow(x, -n); // å½“n=-2147483648ï¼Œå–-nä¼šå‘ç”Ÿæº¢å‡º
        }
        double val = myPow(x, n / 2);
        if(n % 2 == 1) {
            return val * val * x;
        }else {
            return val * val;
        }
    }
}
```

æ–¹æ³•1ï¼šé€’å½’å†™æ³•

```java
// æ—¶é—´å¤æ‚åº¦ï¼šO(logn)
class Solution {
    public double myPow(double x, int n) {
        long N = n;
        return N < 0 ? 1.0 / F(x, -N) : F(x, N);
    }

    private double F(double x, long n) {
        // åˆ¤æ–­æµ®ç‚¹æ•°ç›¸ç­‰ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ x == 1.0
        if(n == 0 || Math.abs(x - 1.0) < 0.00000001) return 1.0;
        double half = F(x, n/2);
        if(n % 2 == 0) {
            return half * half;
        }else {
            return half * half * x;
        }
    }
}
```

æ–¹æ³•2ï¼šè¿­ä»£å†™æ³•ï¼ˆç¬¬2éã€ç¬¬3éåšä»ç„¶ä¸çŸ¥é“æ˜¯å¦‚ä½•æƒ³åˆ°çš„ï¼ŒğŸ˜¢ï¼‰

```java
class Solution {
    public double myPow(double x, int n) {
        long N = n;
        if(N < 0) {
            x = 1 / x;
            N = -N;
        }
        double res = 1.0;
        double half = x;
        for(long i = N; i > 0; i /= 2) {
            if(i % 2 != 0) {
                res *= half;
            }
            half *= half;
        }
        return res;
    }
}
```

è¿­ä»£å†™æ³•çš„å¦ä¸€ç§å®ç°

```java
class Solution {
    public double myPow(double x, int n) {
        double res = 1.0;
        double half = x;
        // æ³¨æ„ï¼Œè¿™é‡Œçš„åˆ¤æ–­æ¡ä»¶ä¸èƒ½å†æ˜¯ i > 0ï¼Œå› ä¸º i å¯èƒ½æ˜¯è´Ÿæ•°
        for(int i = n; i != 0; i /= 2) { 
            if(i % 2 != 0) {
                res *= half;
            }
            half *= half;
        }
        return n >= 0 ? res : 1.0 / res;
    }
}
```



### [278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬](https://leetcode-cn.com/problems/first-bad-version/)

ä½ æ˜¯äº§å“ç»ç†ï¼Œç›®å‰æ­£åœ¨å¸¦é¢†ä¸€ä¸ªå›¢é˜Ÿå¼€å‘æ–°çš„äº§å“ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½ çš„äº§å“çš„æœ€æ–°ç‰ˆæœ¬æ²¡æœ‰é€šè¿‡è´¨é‡æ£€æµ‹ã€‚**ç”±äºæ¯ä¸ªç‰ˆæœ¬éƒ½æ˜¯åŸºäºä¹‹å‰çš„ç‰ˆæœ¬å¼€å‘çš„ï¼Œæ‰€ä»¥é”™è¯¯çš„ç‰ˆæœ¬ä¹‹åçš„æ‰€æœ‰ç‰ˆæœ¬éƒ½æ˜¯é”™çš„**ã€‚

å‡è®¾ä½ æœ‰ n ä¸ªç‰ˆæœ¬ [1, 2, ..., n]ï¼Œä½ æƒ³**æ‰¾å‡ºå¯¼è‡´ä¹‹åæ‰€æœ‰ç‰ˆæœ¬å‡ºé”™çš„ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬**ã€‚

ä½ å¯ä»¥é€šè¿‡è°ƒç”¨`bool isBadVersion(version)`æ¥å£æ¥åˆ¤æ–­ç‰ˆæœ¬å· version æ˜¯å¦åœ¨å•å…ƒæµ‹è¯•ä¸­å‡ºé”™ã€‚å®ç°ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚ä½ åº”è¯¥å°½é‡å‡å°‘å¯¹è°ƒç”¨ API çš„æ¬¡æ•°ã€‚
```
ç¤ºä¾‹:
ç»™å®š n = 5ï¼Œå¹¶ä¸” version = 4 æ˜¯ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚

è°ƒç”¨ isBadVersion(3) -> false
è°ƒç”¨ isBadVersion(5)Â -> true
è°ƒç”¨ isBadVersion(4)Â -> true
æ‰€ä»¥ï¼Œ4 æ˜¯ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚
```
åˆ†æï¼šæ ¹æ®é¢˜æ„ç†è§£åç¿»è¯‘å³å¯ã€‚
```java
// æ—¶é—´å¤æ‚åº¦ï¼šO(log n)
public class Solution extends VersionControl {
    public int firstBadVersion(int n) {
        int left = 1, right = n, mid = 0;
        while(left < right) {
            mid = (right - left) / 2 + left;
            if(isBadVersion(mid)) {
                right = mid;
            }else {
                left = mid + 1;
            }
        }
        return left;
    }
}
```

### [275. HæŒ‡æ•° II](https://leetcode-cn.com/problems/h-index-ii/)

ç»™å®šä¸€ä½ç ”ç©¶è€…è®ºæ–‡è¢«å¼•ç”¨æ¬¡æ•°çš„æ•°ç»„ï¼ˆè¢«å¼•ç”¨æ¬¡æ•°æ˜¯**éè´Ÿæ•´æ•°**ï¼‰ï¼Œ**æ•°ç»„å·²ç»æŒ‰ç…§å‡åºæ’åˆ—**ã€‚ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè®¡ç®—å‡ºç ”ç©¶è€…çš„ h æŒ‡æ•°ã€‚h æŒ‡æ•°çš„å®šä¹‰:  h ä»£è¡¨â€œé«˜å¼•ç”¨æ¬¡æ•°â€ï¼ˆhigh citationsï¼‰ï¼Œä¸€åç§‘ç ”äººå‘˜çš„ h æŒ‡æ•°æ˜¯æŒ‡ä»–çš„ N ç¯‡è®ºæ–‡ä¸­**è‡³å¤šæœ‰ h ç¯‡è®ºæ–‡åˆ†åˆ«è¢«å¼•ç”¨äº†è‡³å°‘ h æ¬¡**ã€‚ï¼ˆå…¶ä½™çš„Â N - hÂ ç¯‡è®ºæ–‡æ¯ç¯‡è¢«å¼•ç”¨æ¬¡æ•°**ä¸å¤šäº** h æ¬¡ã€‚ï¼‰ï¼Œè¦æ±‚æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)

```
è¾“å…¥: citations = [0,1,3,5,6]
è¾“å‡º: 3 
è§£é‡Š: ç»™å®šæ•°ç»„è¡¨ç¤ºç ”ç©¶è€…æ€»å…±æœ‰5ç¯‡è®ºæ–‡ï¼Œæ¯ç¯‡è®ºæ–‡ç›¸åº”çš„è¢«å¼•ç”¨äº† 0, 1, 3, 5, 6 æ¬¡ã€‚ç”±äºç ”ç©¶è€…æœ‰3ç¯‡è®ºæ–‡æ¯ç¯‡è‡³å°‘è¢«å¼•ç”¨äº†3æ¬¡ï¼Œå…¶ä½™ä¸¤ç¯‡è®ºæ–‡æ¯ç¯‡è¢«å¼•ç”¨ä¸å¤šäº3æ¬¡ï¼Œæ‰€ä»¥å¥¹çš„hæŒ‡æ•°æ˜¯3ã€‚

è¯´æ˜:
å¦‚æœhæœ‰å¤šæœ‰ç§å¯èƒ½çš„å€¼,hæŒ‡æ•°æ˜¯å…¶ä¸­æœ€å¤§çš„é‚£ä¸ªã€‚
```

æ€è·¯ï¼šæœ¬é¢˜è¯»èµ·æ¥æœ‰ç‚¹ç»•ï¼Œå°±æ˜¯ç»™å®šä¸€ä¸ªæœ‰åºæ•°ç»„ï¼Œè¦æ±‚æ‰¾å‡ºç¬¦åˆè¦æ±‚çš„æœ€å¤§çš„hï¼Œè¿™ä¸ªhçš„å«ä¹‰æ˜¯ï¼š**æ•°ç»„ä¸­æœ€å¤šæœ‰hä¸ªæ•°ï¼Œè¿™hä¸ªæ•°çš„å€¼å‡å¤§äºç­‰äºh**ã€‚ç”±äºç»™å®šçš„æ•°ç»„å·²ç»æ˜¯æœ‰åºçš„ï¼Œä¸”è¦æ±‚å¯¹æ•°çº§åˆ«çš„å¤æ‚åº¦ï¼Œå¾ˆæ˜¾ç„¶åœ¨æš—ç¤ºæˆ‘ä»¬ç”¨äºŒåˆ†æ³•æ¥è§£å†³æ­¤é—®é¢˜ã€‚

å‡è®¾æŸä¸€å…ƒç´ çš„å€¼æ˜¯`nums[i]`ï¼Œç”±äºæ•°ç»„æ˜¯å‡åºçš„ï¼Œå¯ä»¥è®¡ç®—å‡ºå…ƒç´ å€¼å¤§äºç­‰äº`nums[i]`çš„ä¸ªæ•°æ˜¯ `nums.length - i`ã€‚æ ¹æ®hçš„å®šä¹‰ï¼Œåªéœ€è¦æ‰¾åˆ°**ç¬¬ä¸€ä¸ªå°½é‡å°çš„**å…ƒç´ å€¼`nums[i]`ï¼Œå…¶æ»¡è¶³`nums[i] >= nums.length - i`å³å¯ã€‚

æ ¹æ®ä¸Šè¿°è®¨è®ºï¼Œå¯ä»¥å¾ˆå¿«å†™å‡ºä»£ç ï¼š

```java
// æ—¶é—´å¤æ‚åº¦ï¼šO(n)
public int hIndex(int[] citations) {
  	int n = citations.length;
    for (int i = 0; i < n; i++) {
        if (citations[i] >= n - i) return n - i;
    }
    return 0;
}
```

è¿™ä¸ªä»£ç å¾ˆç®€å•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º`O(n)`ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜å¯ä»¥å°†å…¶ä¼˜åŒ–åˆ°å¯¹æ•°çº§åˆ«ã€‚

åšäºŒåˆ†æ³•çš„é—®é¢˜ï¼Œä¸€å®šè¦å¤šä¸¾å‡ ä¸ªä¾‹å­æ¥æ–§æ­£è‡ªå·±çš„æƒ³æ³•ï¼Œæ™®é€šçš„ä¾‹å­ã€ç‰¹æ®Šçš„è¾¹ç•Œä¾‹å­ç­‰ç­‰ã€‚ä¸‹é¢é€šè¿‡è¿™3ä¸ªä¾‹å­æ¥è¯´æ˜é—®é¢˜ã€‚

```
case 1:
[0,1,3,5,6]
 |   |   | 
nums[mid] == count, å¤§äºç­‰äº3çš„ä¸ªæ•°æ­£å¥½æ°æœ‰3ä¸ªï¼ˆä¸ªæ•°=nums.length-midï¼‰ï¼Œè¿™ä¸ªä¾‹å­å¤ªå·§äº†ï¼Œè²Œä¼¼ä¸å¥½è¯´æ˜é—®é¢˜ã€‚
case 2:
[0,1,2,5,6]  
 |   |   |    
nums[mid] = 2ï¼Œcount=nums.length - mid=3
å› ä¸ºnums[mid] < countï¼Œå› æ­¤ä¸èƒ½è¯´æœ€å¤šå­˜åœ¨3ä¸ªæ•°ï¼Œä¸”è¿™3ä¸ªæ•°çš„å€¼å‡å¤§äºç­‰äº3ï¼Œäºæ˜¯ä¸‹ä¸€è½®è®¡ç®—åº”è¯¥åœ¨ååŠéƒ¨åˆ†è¿›è¡Œã€‚è°ƒæ•´è¾¹ç•Œ left=mid+1
case 3:
[1,4,5,5,6]
 |   |   |
nums[mid] = 5ï¼Œcount=nums.length - mid=3
å› ä¸ºnums[mid] > countï¼Œè¯´æ˜æ•°ç»„ä¸­å¤§äºç­‰äº3çš„å…ƒç´ ä¸ªæ•°å¯èƒ½ä¸æ­¢3ä¸ªï¼Œå› æ­¤ä¸‹ä¸€è½®è®¡ç®—åº”è¯¥åœ¨å‰åŠéƒ¨åˆ†è¿›è¡Œã€‚è°ƒæ•´è¾¹ç•Œ right=mid

ç„¶åå†è€ƒè™‘ä¸€äº›ç‰¹æ®Šæƒ…å†µæ¥éªŒè¯ä»£ç çš„é²æ£’æ€§ï¼Œæ¯”å¦‚ï¼š
nums = [0]
å¯¹åº”çš„H_index = 0
```
åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œ**ä¸‹ä¸€ä¸ªåˆ†æ”¯å¾€å“ªå„¿èµ°å–å†³äºä¸­é—´ç‚¹(`nums[mid]`)çš„å¤§å°å’Œæ•°ç»„å³åŠè¾¹çš„ä¸ªæ•°**ã€‚é€šè¿‡äºŒåˆ†æ³•ï¼Œæˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯æ‰¾åˆ°**ç¬¬ä¸€ä¸ªå°½é‡å°çš„**å…ƒç´ å€¼`nums[i]`ï¼Œä½¿å…¶æ»¡è¶³`nums[i] >= nums.length-i`ï¼Œè€Œ`nums.length-i`å°±æ˜¯æœ¬é¢˜çš„HæŒ‡æ•°ã€‚

ä»£ç å¦‚ä¸‹ï¼š
```java
// æ—¶é—´å¤æ‚åº¦ï¼šO(log n)
class Solution {
    public int hIndex(int[] nums) {
        int left = 0, right = nums.length, mid = 0; // é‡‡ç”¨å·¦é—­å³å¼€çš„æ–¹å¼
        while(left < right) {
            mid = (right - left) / 2 + left;
            if(nums[mid] >= nums.length - mid) {
                right = mid;
            }else {
                left = mid + 1;
            }
        }
        return nums.length - left;
    }
}
```

### [274. HæŒ‡æ•°](https://leetcode-cn.com/problems/h-index/) 

é—®é¢˜åŒä¸Šï¼Œåªæ˜¯ç»™å®šçš„æ•°ç»„æ²¡æœ‰æ’åºã€‚å› æ­¤ä¸èƒ½é‡‡ç”¨äºŒåˆ†æ³•ã€‚

æ€è·¯ï¼šç”±äºåšäº†ä¹‹å‰é‚£ä¸€é¢˜ï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯**å…ˆæŠŠåŸæ•°ç»„æ’åº**ï¼Œç„¶åä½¿ç”¨é¡ºåºæœç´¢ï¼ˆO(n)ï¼‰æˆ–äºŒåˆ†æœç´¢ï¼ˆO(log n)ï¼‰æ¥åšã€‚ä½†æ˜¯ä¸ç®¡é‡‡ç”¨å“ªç§æœç´¢ï¼Œç”±äºéœ€è¦æ’åºï¼Œæ—¶é—´å¤æ‚åº¦çš„ä¸‹é™å°±æ˜¯O(n*log n)ã€‚

åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•å­˜åœ¨æ—¶é—´å¤æ‚åº¦ä¸‹ç•Œ O(n*log n)ï¼Œå¦‚æœè¦å¾—åˆ°æ—¶é—´å¤æ‚åº¦æ›´ä½çš„ç®—æ³•ï¼Œå°±å¿…é¡»è€ƒè™‘**ä¸åŸºäºæ¯”è¾ƒçš„æ’åº**ï¼Œæ¯”å¦‚è®¡æ•°æ’åºï¼ˆæˆ–ç§°æ¡¶æ’åºï¼‰ã€‚

ç”±äºè®ºæ–‡çš„å¼•ç”¨æ¬¡æ•°å¯èƒ½ä¼šéå¸¸å¤šï¼Œè¿™ä¸ªæ•°å€¼å¾ˆå¯èƒ½ä¼šè¶…è¿‡è®ºæ–‡çš„æ€»æ•° nï¼Œå› æ­¤ä½¿ç”¨è®¡æ•°æ’åºæ˜¯éå¸¸ä¸åˆç®—çš„ï¼ˆä¼šè¶…å‡ºç©ºé—´é™åˆ¶ï¼‰ã€‚åœ¨è¿™é“é¢˜ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªä¸éš¾å‘ç°çš„ç»“è®ºæ¥è®©è®¡æ•°æ’åºå˜å¾—æœ‰ç”¨ï¼Œå³ï¼š

> å¦‚æœä¸€ç¯‡æ–‡ç« çš„å¼•ç”¨æ¬¡æ•°è¶…è¿‡è®ºæ–‡çš„æ€»æ•° nï¼Œé‚£ä¹ˆå°†å®ƒçš„å¼•ç”¨æ¬¡æ•°é™ä½ä¸º n ä¹Ÿä¸ä¼šæ”¹å˜ h æŒ‡æ•°çš„å€¼ã€‚

ç”±äº h æŒ‡æ•°ä¸€å®šå°äºç­‰äº nï¼Œå› æ­¤è¿™æ ·åšæ˜¯æ­£ç¡®çš„ã€‚ï¼ˆåˆ†æå‚è€ƒè‡ª[è¿™é‡Œ](https://leetcode-cn.com/problems/h-index/solution/hzhi-shu-by-leetcode/)ï¼‰

æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜å¦‚ä½•ä½¿ç”¨è®¡æ•°æ’åºå¾—åˆ° hh æŒ‡æ•°ã€‚é¦–å…ˆï¼Œå¼•ç”¨æ¬¡æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š

citations=[1,3,2,3,100]

å°†æ‰€æœ‰å¤§äº n=5çš„å¼•ç”¨æ¬¡æ•°å˜ä¸º nï¼Œå¾—åˆ°ï¼š

citations=[1,3,2,3,5]

è®¡æ•°æ’åºå¾—åˆ°çš„ç»“æœå¦‚ä¸‹ï¼š

|   k    | 0    | 1    | 2    | 3    | 4    | 5    |
| :----: | ---- | ---- | ---- | ---- | ---- | ---- |
| bucket | 0    | 1    | 1    | 2    | 0    | 1    |
|  S_k   | 5    | 5    | 4    | 3    | 1    | 1    |

å…¶ä¸­ S_k è¡¨ç¤ºè‡³å°‘æœ‰ k æ¬¡å¼•ç”¨çš„è®ºæ–‡æ•°é‡ï¼Œæ¯”å¦‚S_2è¡¨ç¤ºè‡³å°‘æœ‰2æ¬¡å¼•ç”¨çš„è®ºæ–‡æ•°é‡ï¼Œå…¶å€¼ç­‰äºä¸Šè¡¨ä¸­bucket[k:n]çš„å’Œã€‚æ ¹æ®å®šä¹‰ï¼Œæœ€å¤§çš„æ»¡è¶³ k â‰¤ S_k çš„ k å³ä¸ºæ‰€æ±‚çš„hã€‚åœ¨è¡¨ä¸­ï¼Œè¿™ä¸ª k ä¸º 3ï¼Œå› æ­¤ hæŒ‡æ•°ä¸º 3ã€‚

```java
public int hIndex(int[] citations) {
    // ä¿®æ­£æ•°æ®
    int n = citations.length;
    for (int i = 0; i < n; i++) {
        if (citations[i] > n) citations[i] = n;
    }
    // è®¡æ•°æ’åº
    int[] bucket = new int[n + 1];
    for (int c : citations) {
        bucket[c]++;
    }
    // sk è¡¨ç¤ºæ•°ç»„å…ƒç´ å¤§äºç­‰äºkçš„ä¸ªæ•°
    int sk = 0, k;
    for (k = n; k > 0; k--) {
        sk += bucket[k]; // bucket[k] ä¿å­˜äº†æ•°ç»„ä¸­å€¼ä¸ºkçš„ä¸ªæ•° 
        if (sk >= k) break;
    }
    return k;
}
```

è¡¥å……ï¼š

ä»€ä¹ˆæ˜¯è®¡æ•°æ’åºï¼ˆcountn sortï¼‰ï¼ˆä¹Ÿå«æ¡¶æ’åºï¼ˆbucket sortï¼‰ï¼‰ï¼Ÿ

> å¦‚æœå·²çŸ¥nä¸ªå…³é”®å­—ï¼Œå…¶å–å€¼èŒƒå›´åœ¨0~m-1ä¹‹é—´ï¼Œåˆ™æ¡¶æ’åºç®—æ³•å°†æ¯ä¸ªå¯èƒ½çš„å–å€¼å»ºç«‹ä¸€ä¸ªæ¡¶ï¼Œå³å»ºç«‹mä¸ªæ¡¶ï¼Œæ‰«ænä¸ªå…³é”®å­—æ—¶ï¼Œå°†å€¼æ”¾å…¥ç›¸åº”çš„æ¡¶å†…ï¼Œç„¶åæŒ‰æ¡¶çš„é¡ºåºæ”¶é›†ä¸€éå°±è‡ªç„¶æœ‰åºäº†ã€‚
>
> åŸºäºâ€œæ¯”è¾ƒâ€çš„æ’åºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦è‡³å°‘æ˜¯O(n*log n)ï¼Œè€Œæ¡¶æ’åºå¹¶ä¸æ˜¯åŸºäºâ€œæ¯”è¾ƒâ€çš„æ’åºç®—æ³•ï¼Œå…¶æ—¶é—´å¤æ‚åº¦æ˜¯çº¿æ€§çš„ï¼Œæ¯”ä»»ä½•åŸºäºâ€œæ¯”è¾ƒâ€çš„æ’åºç®—æ³•éƒ½å¿«ã€‚
>
> ä½†æ˜¯è¿™ç§æ’åºç®—æ³•ä¹Ÿæ˜¯æœ‰é™åˆ¶çš„ï¼Œä¹Ÿå°±æ˜¯å…³é”®å­—çš„å–å€¼èŒƒå›´è¦ç¡®å®šï¼Œä¸ç„¶å°±ä¸èƒ½å»ºç«‹ç›¸åº”çš„â€œæ¡¶â€äº†ï¼Œå¹¶ä¸”å…³é”®å­—å–å€¼çš„è·¨åº¦ä¸èƒ½å¤ªå¤§ï¼Œæœ€å¥½é›†ä¸­æŸä¸€èŒƒå›´ï¼Œå¦åˆ™éå¸¸æµªè´¹ç©ºé—´ï¼Œå½“mè¿œå°äºnçš„æ—¶å€™æ›´èƒ½ä½“ç°æ¡¶æ’åºçš„ä¼˜åŠ¿ã€‚

ç¤ºä¾‹ï¼šå·²çŸ¥æŸå…¬é€‰è¯¾æœ‰1500åå­¦ç”Ÿé€‰ä¿®ï¼Œè¯¥è¯¾ç¨‹çš„æˆç»©æ˜¯[0,100]ä¹‹é—´çš„æ•´æ•°ã€‚ç°åœ¨éœ€è¦å°†å­¦ç”Ÿä¿¡æ¯æŒ‰ç…§æˆç»©ä»ä½åˆ°é«˜æ‰“å°å‡ºæ¥ã€‚

åˆ†æï¼šè¿™ä¸€åœºæ™¯å°±éå¸¸é€‚åˆä½¿ç”¨æ¡¶æ’åºï¼ˆå› ä¸ºå–å€¼èŒƒå›´ç¡®å®šï¼Œä¸”æ¯”è¾ƒé›†ä¸­ä¸åˆ†æ•£ï¼Œæ•°å€¼è¿˜ä¸å¤§ï¼‰ã€‚è‹¥å…ˆå°†æˆç»©æ’åºå†æ‰“å°å­¦ç”Ÿä¿¡æ¯ï¼Œåˆ™è‡³å°‘éœ€è¦O(n*log n)çš„æ—¶é—´å¤æ‚åº¦ï¼Œè¿™é‡Œçš„nç­‰äº1500ã€‚è€Œä½¿ç”¨æ¡¶æ’åºï¼Œåªéœ€è¦å»ºç«‹101ä¸ªæ¡¶ï¼Œç„¶åæ‰«æä¸€énä¸ªäººçš„æˆç»©ï¼Œå°†æˆç»©ä¸º i çš„æ”¾å…¥ i å·æ¡¶å³å¯ï¼Œæœ€åé¡ºåºè¯»å–0~100ä¸ªæ¡¶ï¼Œæ•´ä¸ªè¿‡ç¨‹åªéœ€è¦**O(n+m)**çš„æ—¶é—´å¤æ‚åº¦ï¼Œå½“mè¿œå°äºnæ—¶ï¼Œæ—¶é—´å¤æ‚åº¦çº¦ç­‰äºO(n)ã€‚ï¼ˆ**æ³¨ï¼šnæ˜¯å…³é”®å­—çš„ä¸ªæ•°ï¼Œmæ˜¯å…³é”®å­—çš„å–å€¼èŒƒå›´**ï¼‰

```java
public static void countSort(int[] nums) {
    if (nums.length < 2) return;
    int minVal = nums[0], maxVal = nums[0];
    for (int num : nums) {
        minVal = Math.min(minVal, num);
        maxVal = Math.max(maxVal, num);
    }
    // ä¼˜åŒ–ï¼Œå¦‚æœæŒ‰ç…§maxValå»ºç«‹æ¡¶å¤ªæµªè´¹ç©ºé—´äº†
    // æ¯”å¦‚å‡ºç°[100, 93, 97, 92, 96, 99, 92, 89, 93, 97, 90, 94, 92, 95]è¿™ç§æƒ…å†µ
    int m = maxVal - minVal + 1;
    // å»ºç«‹ m ä¸ª"æ¡¶"
    int[] bucket = new int[m]; // bucket[i] å®é™…ä¸Šè¡¨ç¤ºå€¼ä¸º i+minVal çš„å…ƒç´ ä¸ªæ•°
    // æ‰«é¢ä¸€éæ•°ç»„ï¼ŒæŠŠå€¼æ”¾å…¥ç›¸åº”çš„æ¡¶ä¸­
    for (int num : nums) {
        bucket[num - minVal]++; // ä¼˜åŒ–å¤„ç†ï¼Œå‡å°äº†æ¡¶å ç”¨çš„ç©ºé—´
    }
    // æ‰«æä¸€éæ¡¶: O(n)
    int n = 0;
    for (int i = 0; i < bucket.length; i++) {
        while (bucket[i] > 0) {
            nums[n++] = i + minVal;
            bucket[i]--;
        }
    }
}
```

### [162. å¯»æ‰¾å³°å€¼](https://leetcode-cn.com/problems/find-peak-element/) 

å³°å€¼å…ƒç´ æ˜¯æŒ‡å…¶å€¼å¤§äºå·¦å³ç›¸é‚»å€¼çš„å…ƒç´ ã€‚ç»™å®šä¸€ä¸ªè¾“å…¥æ•°ç»„Â numsï¼Œå…¶ä¸­ nums[i] â‰  nums[i+1]ï¼Œæ‰¾åˆ°å³°å€¼å…ƒç´ å¹¶è¿”å›å…¶ç´¢å¼•ã€‚æ•°ç»„å¯èƒ½åŒ…å«å¤šä¸ªå³°å€¼ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å›ä»»ä½•ä¸€ä¸ªå³°å€¼æ‰€åœ¨ä½ç½®å³å¯ã€‚å‡è®¾Â nums[-1] = nums[n] = -âˆã€‚è¦æ±‚**æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)**ã€‚
```
è¾“å…¥: nums = [1,2,1,3,5,6,4]
è¾“å‡º: 1 æˆ– 5 
è§£é‡Š: ä½ çš„å‡½æ•°å¯ä»¥è¿”å›ç´¢å¼• 1ï¼Œå…¶å³°å€¼å…ƒç´ ä¸º 2ï¼›
Â     æˆ–è€…è¿”å›ç´¢å¼• 5ï¼Œ å…¶å³°å€¼å…ƒç´ ä¸º 6ã€‚
```
åˆ†æï¼šï¼ˆå‚è€ƒå®˜æ–¹é¢˜è§£ï¼Œè¿™ä¸€é¢˜çš„æ€è·¯ä¹Ÿæ˜¯éå¸¸å·§å¦™ï¼Œå€¼å¾—å€Ÿé‰´ï¼‰

æœ€å…³é”®çš„æ€æƒ³æ˜¯ï¼šæŠŠæ•°ç»„çœ‹æˆæ˜¯å¤šä¸ªå±€éƒ¨æœ‰åºçš„å­æ•°ç»„ã€‚æ¯”å¦‚ï¼Œnums = [1,2,1,3,5,6,4]ï¼Œé‚£ä¹ˆå­æ•°ç»„[1,2]ã€[1,3,5,6]ã€[4]éƒ½æ˜¯æœ‰åºçš„ã€‚è¿™ä¹ˆè€ƒè™‘æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå½“é‡‡ç”¨äºŒåˆ†æ³•è®¡ç®—å‡ºä¸­é—´èŠ‚ç‚¹midåï¼Œå¯ä»¥é€šè¿‡åˆ¤æ–­`nums[mid]`ä¸`nums[mid+1]`çš„å€¼æ¥ç¡®å®šè¯¥ä¸­é—´èŠ‚ç‚¹æ˜¯å¦å¤„äºå±€éƒ¨é€’å¢æˆ–é€’å‡çš„å­åºåˆ—ä¸­ã€‚

* è‹¥`nums[mid] < nums[mid+1]`ï¼Œè¯´æ˜ mid å¤„äºå±€éƒ¨é€’å¢åºåˆ—ä¸­ï¼Œé‚£ä¹ˆå³°å€¼è‚¯å®šå‡ºç°åœ¨ mid çš„å³ä¾§ï¼Œè°ƒæ•´`left = mid+1`ã€‚ï¼ˆäº‹å®ä¸Šè¿™ä¹ˆè¡¨è¿°å¹¶ä¸ä¸¥è°¨ï¼Œåº”è¯¥è¯´ï¼Œ**ç”±äº mid å¤„äºå±€éƒ¨é€’å¢åºåˆ—ä¸­ï¼Œé‚£ä¹ˆåœ¨ mid çš„å³ä¾§è‚¯å®šå­˜åœ¨å³°å€¼**ã€‚mid çš„å·¦ä¾§ä¹Ÿå¯èƒ½å­˜åœ¨å³°å€¼ï¼Œä½†æ˜¯ç”±äºé¢˜ç›®ä¸­å·²ç»è¯´æ˜è‹¥å­˜åœ¨å¤šä¸ªå³°å€¼åªéœ€è¿”å›ä»»æ„ä¸€ä¸ªï¼Œå› æ­¤åªè€ƒè™‘ä»»æ„ä¸€ä¾§å³å¯ï¼‰
* è‹¥`nums[mid] > nums[mid+1]`ï¼Œè¯´æ˜ mid å¤„äºå±€éƒ¨é€’å‡åºåˆ—ä¸­ï¼Œé‚£ä¹ˆå³°å€¼è‚¯å®šå‡ºç°åœ¨ mid çš„å·¦ä¾§ï¼Œæ³¨æ„`nums[mid]`æœ¬èº«å¯èƒ½å°±æ˜¯å³°å€¼ç‚¹ï¼Œå› æ­¤è°ƒæ•´`right = mid`ã€‚

```java
class Solution {
    public int findPeakElement(int[] nums) {
        int left = 0, right = nums.length - 1, mid = 0;
        while(left < right) {
            mid = (right - left) / 2 + left;
            // ç”±äº while åˆ¤æ–­æ¡ä»¶æ˜¯ä¸¥æ ¼å°äº
            // å› æ­¤åªè¦è¿›å…¥å¾ªç¯ï¼Œåˆ™è‡³å°‘å­˜åœ¨ä¸¤ä¸ªå…ƒç´ ï¼Œ
            // è€Œ mid = (left+right)/2 æ€»æ˜¯åå‘å·¦ä¾§ï¼Œ
            // å› æ­¤ä¸€å®šä¸ç”¨æ‹…å¿ƒ nums[mid+1] ä¼šè¶Šç•Œ
            if(nums[mid] < nums[mid+1]) {
                left = mid + 1;
            }else {
                right = mid;
            }
        }
        return left;
    }
}
```

### [4. å¯»æ‰¾ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°](https://leetcode-cn.com/problems/median-of-two-sorted-arrays/) 

ç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æœ‰åºæ•°ç»„Â nums1 å’ŒÂ nums2ã€‚æ‰¾å‡ºè¿™ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°ï¼Œå‡è®¾Â nums1Â å’ŒÂ nums2Â ä¸ä¼šåŒæ—¶ä¸ºç©ºã€‚è¦æ±‚å°½å¯èƒ½é«˜æ•ˆã€‚

```
ç¤ºä¾‹1ï¼š
nums1 = [1, 3]
nums2 = [2]
åˆ™ä¸­ä½æ•°æ˜¯ 2.0

ç¤ºä¾‹2ï¼š
nums1 = [1, 2]
nums2 = [3, 4]
åˆ™ä¸­ä½æ•°æ˜¯ (2 + 3)/2 = 2.5
```

åˆ†æï¼šè¿™ä¸€é¢˜éå¸¸æœ‰ä»·å€¼ï¼Œå­¦åˆ°äº†å…¨æ–°çš„æ€è·¯ã€‚

é¦–å…ˆæ˜ç¡®ä¸­ä½æ•°çš„å®šä¹‰ï¼š
> å¦‚æœæŸä¸ªæœ‰åºæ•°ç»„é•¿åº¦æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆå…¶ä¸­ä½æ•°å°±æ˜¯æœ€ä¸­é—´é‚£ä¸ªå…ƒç´ ï¼›å¦‚æœæ•°ç»„é•¿åº¦æ˜¯å¶æ•°ï¼Œé‚£ä¹ˆå°±æ˜¯æœ€ä¸­é—´ä¸¤ä¸ªå…ƒç´ çš„å¹³å‡å€¼ã€‚

æ–¹æ³•1ï¼šç›´æ¥æ ¹æ®â€œä¸­ä½æ•°â€çš„å®šä¹‰æ¥åšï¼Œå°†ä¸¤ä¸ªæœ‰åºæ•°ç»„åˆå¹¶æˆä¸€ä¸ªæœ‰åºæ•°ç»„ï¼Œç„¶åç›´æ¥æ ¹æ®ä¸‹æ ‡è¿”å›ç»“æœå³å¯ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•éœ€è¦`O(m+n)`çš„é¢å¤–ç©ºé—´ï¼Œç”±äºåˆå¹¶æ“ä½œï¼Œéœ€è¦å®Œæ•´çš„éå†çš„ä¸€è¾¹æ•°ç»„ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º`O(m+n)`ã€‚

æ–¹æ³•2ï¼šä»â€œ**å¯»æ‰¾ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ç¬¬kä¸ªæ•°**â€è¿™ä¸€è§’åº¦å‡ºå‘ï¼ŒæŠŠé—®é¢˜æ³›åŒ–ï¼Œæ›´é€šç”¨ï¼

å¯¹äºåœ¨ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸­å¯»æ‰¾ç¬¬kä¸ªæ•°ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªç®—æ³•ï¼ˆå‚è€ƒ[è¿™é‡Œ](https://leetcode-cn.com/problems/median-of-two-sorted-arrays/solution/xiang-xi-tong-su-de-si-lu-fen-xi-duo-jie-fa-by-w-2/)ï¼‰ã€‚

å‡è®¾æˆ‘ä»¬è¦æ‰¾ç¬¬`k`ä¸ªæ•°ï¼Œæ¯æ¬¡å¾ªç¯å¯ä»¥æ’é™¤æ‰`k/2`ä¸ªæ•°ã€‚ä¸‹é¢æ¥çœ‹ä¾‹å­ã€‚

å‡è®¾æˆ‘ä»¬è¦æ‰¾ç¬¬7ä¸ªæ•°ï¼Œå³ `k=7`ã€‚é‚£ä¹ˆæ¯”è¾ƒä¸¤ä¸ªæ•°ç»„ä¸­ç¬¬ `k/2 = 7/2 = 3` ä¸ªæ•°ï¼ˆåœ¨å™è¿°ä¸­æˆ‘ä»¬çº¦å®šä¸‹æ ‡ä»1å¼€å§‹ï¼Œåœ¨ç¼–ç æ—¶å†å¤„ç†è¿™äº›ç»†èŠ‚ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°`nums1[k/2] = 4 > nums2[k/2] = 3`ï¼Œä»è€Œå¯ä»¥æ’é™¤æ‰nums2ä¸­çš„å‰`k/2`ä¸ªæ•°ï¼ˆä¹Ÿå°±æ˜¯1,2,3ï¼‰ã€‚

![image.png](https://pic.leetcode-cn.com/735ea8129ab5b56b7058c6286217fa4bb5f8a198e4c8b2172fe0f75b29a966cd-image.png)

æ©™è‰²çš„éƒ¨åˆ†è¡¨ç¤ºå·²ç»å»æ‰çš„æ•°å­—ã€‚ç»è¿‡ä¸€æ¬¡æ¯”è¾ƒï¼Œæ’é™¤æ‰`k/2` ä¸ªæ•°åï¼ŒåŸå…ˆæ±‚ç¬¬`k` ä¸ªæ•°åˆ™è½¬åŒ–æˆæ±‚ç¬¬`k - k/2` ä¸ªæ•°äº†ã€‚äºæ˜¯ï¼Œä¸‹ä¸€è½®è®¡ç®—è¦æ±‚çš„`k`ç­‰äº4ï¼Œå’Œä¹‹å‰çš„ä¸€æ ·ï¼Œæ¯”è¾ƒ`nums1[k/2]`å’Œ`nums2[k/2]`çš„å¤§å°ï¼ˆè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ©™è‰²éƒ¨åˆ†åªæ˜¯ç†è®ºä¸Šè¢«æ’é™¤ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„ç‰©ç†åˆ é™¤ï¼Œæ‰€ä»¥åœ¨ç¼–ç æ—¶ï¼ŒçœŸæ­£æ¯”è¾ƒçš„æ˜¯`nums1[k/2+ä¸Šä¸€è½®è¢«æ’é™¤æ‰çš„ä¸ªæ•°]` å’Œ `nums2[k/2+ä¸Šä¸€è½®è¢«æ’é™¤æ‰çš„ä¸ªæ•°]`ï¼‰ï¼Œè¿™ä¸€è½®æ’é™¤nums1çš„å‰`k/2`ä¸ªæ•°ã€‚

![image.png](https://pic.leetcode-cn.com/09b8649cd2b8bbea74f7f632b098fed5f8404530ff44b5a0b54a360b3cf7dd8f-image.png)

![image.png](https://pic.leetcode-cn.com/f2d72fd3dff109ad810895b9a0c8d8782f47df6b2f24f9de72704961bc547fcb-image.png)

è¿™ä¸€è½®è¿‡åï¼Œåˆæ’é™¤æ‰2ä¸ªæ•°ï¼Œäºæ˜¯è½¬åŒ–æˆæ±‚ç¬¬2ä¸ªæ•°ï¼ˆk=4-2=2ï¼‰ã€‚è¿™ä¸€è½®å‡ºç°äº†`nums1[k/2]==nums2[k/2]`çš„æƒ…å†µï¼Œå¯ä»¥æ’é™¤ä»»æ„ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨è¿™é‡Œï¼Œä»¤`nums1[k/2]â‰¥nums2[k/2]` ä¸€èµ·è€ƒè™‘ï¼Œäºæ˜¯æ’é™¤æ‰æ•°ç»„nums2ä¸­çš„ä¸€ä¸ªæ•°ã€‚

![image.png](https://pic.leetcode-cn.com/3c89a8ea29f2e19057b57242c8bc37c5f09b6796b96c30f3d42caea21c12f294-image.png)

å½“kç­‰äº1æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥è¿”å›ç­”æ¡ˆäº†ï¼Œä¹Ÿå°±æ˜¯å–ä¸¤ä¸ªæ•°ç»„ä¸­é¦–ä¸ªå…ƒç´ è¾ƒå°çš„é‚£ä¸ªã€‚

æˆ‘ä»¬æ¯æ¬¡éƒ½æ˜¯å– `k/2` çš„æ•°è¿›è¡Œæ¯”è¾ƒï¼Œæœ‰æ—¶å€™å¯èƒ½ä¼šé‡åˆ°æ•°ç»„é•¿åº¦**å°äº**`k/2`çš„æ—¶å€™ã€‚è¿™ä¸ªåœ¨ç¼–ç æ—¶è¦å°¤ä¸ºæ³¨æ„ï¼

![image.png](https://pic.leetcode-cn.com/ad87d1f63a9bbd99e12605686290800ce61b03f9fb98d87f1d8c020d404421ac-image.png)

æ­¤æ—¶ `k/2` ç­‰äº 3ï¼Œè€Œä¸Šè¾¹çš„æ•°ç»„é•¿åº¦æ˜¯ 2ï¼Œæˆ‘ä»¬æ­¤æ—¶å°†ç®­å¤´æŒ‡å‘å®ƒçš„æœ«å°¾å°±å¯ä»¥äº†ã€‚è¿™æ ·çš„è¯ï¼Œç”±äº 2 < 3ï¼Œæ‰€ä»¥å°±ä¼šå¯¼è‡´ä¸Šè¾¹çš„æ•°ç»„ 1ï¼Œ2 éƒ½è¢«æ’é™¤ã€‚é€ æˆä¸‹è¾¹çš„æƒ…å†µã€‚

![image.png](https://pic.leetcode-cn.com/7ea1963f184b1dcaddf951326ccbe7aa09cfbb9ebee7fffb2ede131853b3d1de-image.png)

ç”±äº 2 ä¸ªå…ƒç´ è¢«æ’é™¤ï¼Œæ‰€ä»¥æ­¤æ—¶ k = 5ï¼Œåˆç”±äºä¸Šè¾¹çš„æ•°ç»„å·²ç»ç©ºäº†ï¼Œæˆ‘ä»¬åªéœ€è¦è¿”å›ä¸‹è¾¹çš„æ•°ç»„çš„ç¬¬ 5 ä¸ªæ•°å­—å°±å¯ä»¥äº†ã€‚

ä»ä¸Šè¿°çš„è®¨è®ºå¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯æ‰¾ç¬¬å¥‡æ•°ä¸ªè¿˜æ˜¯ç¬¬å¶æ•°ä¸ªæ•°å­—ï¼Œå¯¹ç®—æ³•å¹¶æ²¡æœ‰å½±å“ï¼Œè€Œä¸”åœ¨ç®—æ³•è¿›è¡Œä¸­ï¼Œk çš„å€¼éƒ½æœ‰å¯èƒ½ä»å¥‡æ•°å˜ä¸ºå¶æ•°ï¼Œ**æœ€ç»ˆéƒ½ä¼šå˜ä¸º 1 æˆ–è€…ç”±äºä¸€ä¸ªæ•°ç»„ç©ºäº†ï¼Œç›´æ¥è¿”å›ç»“æœ**ã€‚

é€šè¿‡ä»¥ä¸Šåˆ†æï¼Œå³å¯å†™å‡ºå¦‚ä½•æ±‚ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ç¬¬kä¸ªå€¼ã€‚å¯¹äºæœ¬é¢˜ï¼Œæ±‚ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°ï¼Œå‡è®¾æ•°ç»„`nums1`å’Œ`nums2`çš„å…ƒç´ ä¸ªæ•°åˆ†åˆ«ä¸º`m`, `n`ã€‚è‹¥`m+n`ä¸ºå¥‡æ•°ï¼Œåˆ™ä¸­ä½æ•°å–ä¸‹æ ‡ä¸º`(m+n)/2`çš„å€¼ï¼Œå¦‚æœ`m+n`ä¸ºå¶æ•°ï¼Œåˆ™ä¸­ä½æ•°å–ä¸‹æ ‡ä¸º`(m+n)/2`å’Œ`(m+n)/2 - 1`çš„å¹³å‡å€¼ã€‚æ ¹æ®ä¸Šæ–‡çš„è¯­å¢ƒï¼ˆç¬¬1ä¸ªå…ƒç´ ä¸‹æ ‡ä¸º0ï¼‰ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æŠ€å·§æŠŠå¥‡æ•°å’Œå¶æ•°çš„æƒ…å†µåˆäºŒä¸ºä¸€ï¼š

* å‡è®¾ m+n=6ï¼Œä¸­ä½æ•°ä¸ºä¸‹æ ‡ä¸º 2 å’Œ 3 çš„ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ï¼Œä¹Ÿå°±æ˜¯æ±‚ç¬¬ 3 ä¸ªæ•°å’Œç¬¬ 4 ä¸ªæ•°ã€‚æ­¤æ—¶ï¼Œk1 = (6+1)/2=3ï¼Œk2 = (6+2)/2 = 4ï¼Œæ­£å¥½æ»¡è¶³è¦æ±‚ã€‚
* å‡è®¾ m+n=5ï¼Œä¸­ä½æ•°å–ä¸‹æ ‡ä¸º 2 çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ç¬¬ 3 ä¸ªæ•°ã€‚æ­¤æ—¶ï¼Œk1 = (5+1)/2=3ï¼Œk2 = (5+2)/2=3ï¼Œå³å½“å¥‡æ•°ä¸ªæ•°æ—¶ï¼Œæ±‚ä¸¤éå†é™¤ä»¥2ï¼Œç»“æœä¸€æ ·ã€‚

è¿™é‡Œè®°å½•ä¸€ä¸‹è¿™ä¸ªæŠ€å·§æ˜¯å› ä¸ºè‡ªå·±ç¬¬ä¸€æ¬¡é‡åˆ°ï¼Œæ¯”è¾ƒæ–°å¥‡ã€‚ä¸ºäº†æ•ˆç‡è¿˜æ˜¯å¥‡å¶æƒ…å†µåˆ†å¼€æ¥å†™ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚

* æ—¶é—´å¤æ‚åº¦ï¼šåœ¨æ±‚ç¬¬ k ä¸ªæ•°æ—¶ï¼Œæ¯ä¸€è½®è®¡ç®—å¯ä»¥æ’é™¤ k/2 ä¸ªæ•°ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯ O(log(k))ï¼Œæœ¬é¢˜ä¸­ k = (m+n)/2 ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸ºO(log(m+n))ã€‚


* ç©ºé—´å¤æ‚åº¦ï¼šè™½ç„¶æˆ‘ä»¬ç”¨åˆ°äº†é€’å½’ï¼Œä½†æ˜¯å¯ä»¥çœ‹åˆ°è¿™ä¸ªé€’å½’å±äº**å°¾é€’å½’**ï¼ˆä»€ä¹ˆæ˜¯å°¾é€’å½’ï¼Ÿï¼‰ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¸éœ€è¦ä¸åœåœ°å †æ ˆï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸º O(1)ã€‚

```java
// æ—¶é—´å¤æ‚åº¦ï¼šO(log(m+n))
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        int n1 = nums1.length, n2 = nums2.length;
        if((n1+n2)%2 == 1) {
            return (double)findKthElement(nums1, 0, n1-1, nums2, 0, n2-1, (n1+n2)/2 + 1);
        }else {
            int a = findKthElement(nums1, 0, n1-1, nums2, 0, n2-1, (n1+n2)/2);
            int b = findKthElement(nums1, 0, n1-1, nums2, 0, n2-1, (n1+n2)/2 + 1);
            return (double)(a+b)/2;
        }
    }
    // è¿”å›ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ç¬¬kä¸ªå…ƒç´ 
    // 1 â‰¤ k â‰¤ n1+n2
    private int findKthElement(int[] nums1, int l1, int r1, 
                               int[] nums2, int l2, int r2, int k) {
        int n1 = r1-l1+1, n2 = r2-l2+1;
        if(n1 > n2) { // ç¡®ä¿nums1çš„é•¿åº¦æ€»æ˜¯å°äºnums2çš„ä¸ªæ•°
            return findKthElement(nums2, l2, r2, nums1, l1, r1, k);
        }
        // é€’å½’è¾¹ç•Œ
        if(n1 == 0) {
            return nums2[l2+k-1];
        }
        if(k == 1) {
            return Math.min(nums1[l1], nums2[l2]);
        }

        /* 
        è¿™éƒ¨åˆ†çš„å¤„ç†éå¸¸å…³é”®ï¼Œå®¹æ˜“é”™è¯¯çš„è®¤ä¸ºæ˜¯ i = l1 + k/2 - 1
        nums1 = [4]
        nums2 = [1,2,3,5,6]
        */
        int i = l1 + Math.min(n1, k/2) - 1; 
        int j = l2 + Math.min(n2, k/2) - 1;
        if(nums1[i] <= nums2[j]) {
            return findKthElement(nums1, l1+Math.min(n1, k/2), r1, nums2, l2, r2, k-Math.min(n1, k/2));
        }else {
            return findKthElement(nums1, l1, r1, nums2, l2+Math.min(n2, k/2), r2, k-Math.min(n2, k/2));
        }
    }
}

// å†™æ³•2
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        int n1 = nums1.length, n2 = nums2.length;
        int k1 = (n1+n2+1)/2, k2 = (n1+n2+2)/2; // trick
        int a = findKthElement(nums1, 0, n1-1, nums2, 0, n2-1, k1);
        int b = findKthElement(nums1, 0, n1-1, nums2, 0, n2-1, k2);
        return (double)(a+b)/2;
    }
    //...
}
```

### [29. ä¸¤æ•°ç›¸é™¤](https://leetcode-cn.com/problems/divide-two-integers/)

ç»™å®šä¸¤ä¸ªæ•´æ•°ï¼Œè¢«é™¤æ•°Â dividendÂ å’Œé™¤æ•°Â divisorã€‚å°†ä¸¤æ•°ç›¸é™¤ï¼Œè¦æ±‚ä¸ä½¿ç”¨ä¹˜æ³•ã€é™¤æ³•å’Œ mod è¿ç®—ç¬¦ã€‚

è¿”å›è¢«é™¤æ•°Â dividendÂ é™¤ä»¥é™¤æ•°Â divisorÂ å¾—åˆ°çš„å•†ã€‚

æ•´æ•°é™¤æ³•çš„ç»“æœåº”å½“æˆªå»ï¼ˆtruncateï¼‰å…¶å°æ•°éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼štruncate(8.345) = 8 ä»¥åŠ truncate(-2.7335) = -2
```
ç¤ºä¾‹Â 1:
è¾“å…¥: dividend = 10, divisor = 3
è¾“å‡º: 3
è§£é‡Š: 10/3 = truncate(3.33333..) = truncate(3) = 3

ç¤ºä¾‹Â 2:
è¾“å…¥: dividend = 7, divisor = -3
è¾“å‡º: -2
è§£é‡Š: 7/-3 = truncate(-2.33333..) = -2
```
è¯´æ˜:

* è¢«é™¤æ•°å’Œé™¤æ•°å‡ä¸º 32 ä½æœ‰ç¬¦å·æ•´æ•°ã€‚
* é™¤æ•°ä¸ä¸ºÂ 0ã€‚
* å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨ 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå…¶æ•°å€¼èŒƒå›´æ˜¯ [âˆ’2^31,Â  2^31Â âˆ’ 1]ã€‚æœ¬é¢˜ä¸­ï¼Œå¦‚æœé™¤æ³•ç»“æœæº¢å‡ºï¼Œåˆ™è¿”å› 2^31Â âˆ’ 1ã€‚

åˆ†æï¼šæœ¬é¢˜è€ƒå¯Ÿçš„éå¸¸ç»†èŠ‚ï¼Œé€šè¿‡è¿™ä¸€é¢˜ï¼Œè¦å¯¹è®¡ç®—æœºä¸­å¦‚ä½•è¡¨ç¤ºæ•°å€¼ï¼Œå¦‚ä½•å®ç°åŸºæœ¬è¿ç®—æœ‰ä¸€ä¸ªäº†è§£ï¼Œè€Œä¸æ˜¯ä¸ºäº†ç®€å•çš„ACã€‚

é¦–å…ˆï¼Œæ—¢ç„¶ä¸èƒ½ä½¿ç”¨ä¹˜é™¤æ³•ï¼Œé‚£ä¹ˆåªèƒ½é€šè¿‡å‡æ³•æ¥æ¨¡æ‹Ÿé™¤æ³•äº†ã€‚å‡è®¾`dividend = 16`ï¼Œ`divisor = 3`ï¼Œç”±äº`dividend(16) > divisor(3)`ï¼Œè¯´æ˜ç»“æœè‡³å°‘ä¸º1ï¼›äºæ˜¯ï¼Œè®©`divisor`åŠ å€ï¼ˆå³å˜ä¸º6ï¼‰ï¼Œç”±äº16ä»ç„¶å¤§äº6ï¼Œè¯´æ˜ç»“æœè‡³å°‘ä¸º2ï¼›äºæ˜¯ï¼Œç»§ç»­è®©`divisor`åŠ å€(å³å˜ä¸º12)ï¼Œç”±äº16ä¾æ—§å¤§äº12ï¼Œè¯´æ˜ç»“æœè‡³å°‘ä¸º4ï¼›äºæ˜¯ï¼Œç»§ç»­è®©`divisor`åŠ å€(å³å˜ä¸º24)ï¼Œæ­¤æ—¶ï¼Œ16å°äº24ï¼Œä¸èƒ½ç»§ç»­è¿™ä¹ˆçŒ›å¹²äº†ï¼Œäºæ˜¯ç”±**å€æ•°å¢é•¿**æ”¹ä¸º**çº¿æ€§å¢é•¿**ã€‚

ä¸è€ƒè™‘è¾¹ç•Œæƒ…å†µï¼Œç®€å•å®ç°å¦‚ä¸‹ï¼š
```java
// çº¿æ€§å¢é•¿ï¼Œä¸å¤Ÿå¿«
class Solution {
    public int divide(int dividend, int divisor) {
        // ç‰¹ä¾‹
        if(dividend == 0) return 0;
        // åˆ¤æ–­ç¬¦å·
        boolean negative = false;
        if((dividend < 0 && divisor > 0) || (dividend > 0 && divisor < 0)) {
            negative = true;
            if(dividend < 0) dividend = Math.abs(dividend); // ???
            if(divisor < 0) divisor = Math.abs(divisor);
        }
        int count = 0;
        // æ ¸å¿ƒé€»è¾‘
        while(dividend > divisor) {
            count++;
            dividend -= divisor;
        }
        return negative ? -count : count;
    }
}
// å…ˆå€æ•°å¢é•¿ï¼Œå†çº¿æ€§å¢é•¿
class Solution {
    public int divide(int dividend, int divisor) {
        // ç‰¹ä¾‹
        if(dividend == 0) return 0;
        // åˆ¤æ–­ç¬¦å·
        boolean negative = false;
        if((dividend < 0 && divisor > 0) || (dividend > 0 && divisor < 0)) {
            negative = true;
            if(dividend < 0) dividend = Math.abs(dividend); // ???
            if(divisor < 0) divisor = Math.abs(divisor);
        }
        int count = 1;
        int originDividend = dividend, originDivisor = divisor;
        dividend -= divisor;
        // æ ¸å¿ƒé€»è¾‘
        // å€æ•°å¢é•¿
        while(dividend >= divisor) {
            count = count + count;
            divisor += divisor;
            dividend -= divisor;
        }
        // çº¿æ€§å¢é•¿
        while(originDividend - divisor >= originDivisor) {
            count++;
            divisor += originDivisor;
        }
        return negative ? -count : count;
    }
    private int opposite(int x) {
        return ~x + 1;
    }
}
```
ä¸Šè¿°å®ç°å¯¹äºåŸºæœ¬çš„caseå·²ç»å¯ä»¥é€šè¿‡äº†ï¼Œåªæ˜¯æ²¡è€ƒè™‘è¾¹ç•Œæƒ…å†µï¼Œæœ¬é¢˜çš„æ ¸å¿ƒé€»è¾‘ä¹Ÿå°±è¿™äº›ã€‚BUTï¼å¦‚æœäº†è§£`Math.abs()`çš„å®ç°ï¼Œä¼šå‘ç°è¿™å…¶ä¸­å°±ç”¨äº†ä¹˜æ³•è¿ç®—ã€‚
```java
// from Math.java
public static int abs(int a) {
    return (a < 0) ? -a : a; // -a ä¸å°±ç›¸å½“äºæ˜¯ (-1) Ã— a ä¹ˆï¼
}
```
`-a` ä¸å°±ç›¸å½“äºæ˜¯`(-1) Ã— a`ä¹ˆï¼å› æ­¤è¿™ä¹ˆåšæ˜¯ä¸ç¬¦åˆè¦æ±‚çš„ï¼Œ**æˆ‘ä»¬éœ€è¦çŸ¥é“è®¡ç®—æœºä¸­å¦‚ä½•è¡¨ç¤ºè´Ÿæ•°**ã€‚ä»¥ Java è¯­è¨€ä¸ºä¾‹ï¼Œåœ¨ Java ä¸­ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹ int ç”±32ä½è¡¨ç¤ºã€‚

```
3 = 0000 0000 0000 0000 0000 0000 0000 0011
    |
  æœ€é«˜ä½ï¼šæœ€é«˜ä½ä¸ºç¬¦å·ä½ï¼Œ0ä»£è¡¨æ­£æ•°ï¼Œ1ä»£è¡¨è´Ÿæ•°
```

é‚£ä¹ˆï¼Œ-3 è¯¥å¦‚ä½•è¡¨ç¤ºå‘¢ï¼Ÿå®ƒæ˜¯è¿™æ ·è¡¨ç¤ºçš„ï¼šå¯¹ 3 çš„äºŒè¿›åˆ¶è¡¨ç¤ºâ€œ**æŒ‰ä½å–å**â€ï¼Œç„¶åâ€œ**æœ«ä½åŠ 1**â€ã€‚å¦‚ä¸‹ï¼š

```
3 = 0000 0000 0000 0000 0000 0000 0000 0011
    1111 1111 1111 1111 1111 1111 1111 1100 ï¼ˆæŒ‰ä½å–åï¼‰
    1111 1111 1111 1111 1111 1111 1111 1101 ï¼ˆæœ«ä½åŠ 1ï¼‰
å³ï¼š
-3= 1111 1111 1111 1111 1111 1111 1111 1101
å¦‚æœç»™å®šä¸€ä¸ªäºŒè¿›åˆ¶åºåˆ—ä¸ºï¼š1111 1111 1111 1111 1111 1111 1111 1101ï¼Œæ€ä¹ˆäººä¸ºçš„æŠŠå®ƒç¿»è¯‘æˆåè¿›åˆ¶æ•°å­—å‘¢ï¼Ÿ
ç”±äºæœ€é«˜ä½æ˜¯ 1 ï¼Œå¯çŸ¥è¿™ä¸ªæ•°ä¸€å®šæ˜¯è´Ÿæ•°ï¼Œç„¶åå†æ ¹æ®â€œæŒ‰ä½å–åï¼Œæœ«ä½åŠ 1â€çš„é€†æ“ä½œæ¥è¿ç®—ï¼Œä¹Ÿå°±æ˜¯â€œæœ«ä½å‡1ï¼ŒæŒ‰ä½å–åâ€ã€‚
1111 1111 1111 1111 1111 1111 1111 1100 ï¼ˆæœ«ä½å‡1ï¼‰
0000 0000 0000 0000 0000 0000 0000 0011 ï¼ˆæŒ‰ä½å–åï¼‰ 
```

å¯é€šè¿‡å¦‚ä¸‹ç¨‹åºéªŒè¯ï¼š

```java
System.out.println("x = " + x + ", binary string = " + Integer.toBinaryString(x));
System.out.println("-x = " + -x + ", binary string = " + Integer.toBinaryString(-x));
```

åœ¨æœ¬é¢˜ä¸­ï¼Œç”±äºå­˜åœ¨æ­£/è´Ÿçš„æƒ…å†µï¼Œéœ€è¦å¯¹ç»“æœä¹˜ä»¥-1ï¼Œä½†é¢˜ç›®è§„å®šä¸èƒ½ä½¿ç”¨ä¹˜æ³•è¿ç®—ï¼Œæ•…å¯é€šè¿‡â€œæŒ‰ä½å–åï¼Œæœ«ä½åŠ 1â€çš„æ–¹å¼æ¥è®¡ç®—`x`çš„ç›¸åæ•°`-x`ã€‚

```
int opposite(int x){
	return ~x + 1;
}
```

ä½†æ˜¯ï¼Œå¦‚æœç»™å®šçš„ `x` ç­‰äº `Integer.MIN_VALUE` å‘¢ï¼Ÿ

```
MAX_VALUE = 2147483647,  binary string = 01111111111111111111111111111111
MIN_VALUE = -2147483648, binary string = 10000000000000000000000000000000        

int å¯è¡¨ç¤ºçš„æœ€å¤§å€¼
0111 1111 1111 1111 1111 1111 1111 1111 --> 2^31 - 1
int å¯è¡¨ç¤ºçš„æœ€å°å€¼
1000 0000 0000 0000 0000 0000 0000 0000 --> -2^31
```
å¯¹äºæœ‰ç¬¦å·æ•´æ•°ï¼Œ**è´Ÿæ•°è¦æ¯”æ•´æ•°å¤šä¸€ä¸ªï¼Œå› æ­¤å½“ç»™å®šçš„ `x` ç­‰äº `Integer.MIN_VALUE` æ—¶ï¼Œå¯¹å…¶è®¡ç®— `-x` ä¼šæº¢å‡ºï¼Œå› ä¸ºå¹¶ä¸å­˜åœ¨è¿™æ ·ä¸€ä¸ªæ•´æ•°æ¥è¡¨ç¤ºå®ƒ**ã€‚

```java
// å†™æ³•1ï¼Œæœ‰bug
/**
 * æŠŠæ‰€æœ‰çš„æ•°éƒ½è½¬åŒ–ä¸ºæ­£æ•°æ¥å¤„ç†ï¼Œç¬¦å·æœ€åå†æ·»åŠ 
 */
public int divide(int dividend, int divisor) {
    // ç‰¹åˆ¤ï¼šé™¤æ•°ä¸º0ã€‚ï¼ˆé¢˜ç›®å·²ç»ä¿è¯è¢«é™¤æ•°ä¸ä¸º0ï¼Œæ•…æ— éœ€è€ƒè™‘ï¼‰
    if(dividend == 0) return 0;

    // ç‰¹åˆ¤ï¼šå¦‚æœè¢«é™¤æ•°æ˜¯1ï¼ˆæˆ–-1ï¼‰ï¼Œç›´æ¥è¿”å›é™¤æ•°æœ¬èº«ï¼ˆé™¤æ•°çš„ç›¸åæ•°ï¼‰
    //if(divisor == 1) return dividend;
    //else if(divisor == -1) return opposite(dividend);

    // ä½†æ˜¯è¿™ç§æƒ…å†µæœ‰ä¸€ä¸ªç‰¹ä¾‹ï¼Œå³ MIN_VALUE / -1 ï¼Œç”±äºå¯¹ int å‹çš„æœ€å°å€¼å–ç›¸åæ•°ä¼šå‘ç”Ÿæº¢å‡ºï¼Œ
    // æ ¹æ®é¢˜æ„ï¼Œå‘ç”Ÿæº¢å‡ºæ—¶è¿”å› MAX_VALUEã€‚å› æ­¤ä¸Šé¢çš„å†™æ³•ä¿®æ”¹å¦‚ä¸‹ï¼š
    if(divisor == -1 && dividend == Integer.MIN_VALUE) return Integer.MAX_VALUE;
    if(divisor == 1) return dividend;
    else if(divisor == -1) return opposite(dividend);


    // è°ƒæ•´ï¼Œå¦‚æœå‡ºç°è´Ÿæ•°ï¼Œå°†å…¶è½¬åŒ–ä¸ºæ•´æ•°å¤„ç†ï¼Œæœ€åè¿”å›ç»“æœæ—¶å†å¤„ç†ç¬¦å·
    boolean isPositive = (dividend < 0 && divisor < 0) || (dividend > 0 && divisor > 0);
    if(dividend < 0)
        dividend = opposite(dividend);
    if(divisor < 0)
        divisor = opposite(divisor);

    // è¿™é‡Œåˆä¼šå‡ºç°ä¸€ä¸ªæ„å¤–ï¼Œæ¯”å¦‚ dividend = Integer.MIN_VALUE, divisor = 2,
    // ç†åº”è¿”å› -1073741824ï¼Œä½†æ˜¯æ ¹æ®è¿™é‡Œçš„é€»è¾‘ï¼Œä¼šè¿”å› 0
    // å¯¹äº Integer.MIN_VALUEï¼Œä¹Ÿå°±æ˜¯ -2147483648ï¼Œå’Œå…¶ä»–æ•°å€¼ä¸ä¸€æ ·çš„æ˜¯ï¼š
    // opposite(-2147483648)çš„ç»“æœä»ç„¶ç­‰äº-2147483648ï¼Œè€Œä¸æ˜¯æ­£å¸¸é€»è¾‘ä¸‹çš„2147483648ï¼Œè¿™æ˜¯ç”±äºæº¢å‡ºé€ æˆçš„
    // è¿™ä¸ªé—®é¢˜åœ¨è¿™ä¸€ç‰ˆä»£ç ä¸­ä¼¼ä¹æ— æ³•è§£å†³

    // ç‰¹åˆ¤ï¼šé™¤æ•°çš„ç»å¯¹å€¼ å°äº è¢«é™¤æ•°çš„ç»å¯¹å€¼ï¼Œç»“æœä¸º0ã€‚æ¯”å¦‚ 1/3, -1/3, 1/(-3)
    if(dividend < divisor) return 0;

    int originalDividend = dividend, originalDivisor = divisor;
    // äºŒåˆ†æ³•
    int ans = 1;
    dividend -= divisor;
    while (divisor <= dividend){
        ans = ans + ans;
        divisor += divisor;
        dividend -= divisor;
    }
    // å‰©ä½™çš„éƒ¨åˆ†çº¿æ€§å¤„ç†
    while (originalDividend - divisor >= originalDivisor){
        ans++;
        divisor += originalDivisor;
    }
    return isPositive ? ans : opposite(ans);
}

private int opposite(int x){
    return ~x + 1;
}
```

åœ¨ä¸Šé¢çš„å†™æ³•ä¸­ï¼Œæ— æ³•å¤„ç†`dividend = -2147483648` çš„æƒ…å†µã€‚è¯´åˆ°åº•ï¼Œæˆ‘ä»¬çš„é€»è¾‘æ˜¯ï¼Œä¸ç®¡ç»™å®šçš„ dividend å’Œ divisor æ˜¯æ­£æ•°è¿˜æ˜¯è´Ÿæ•°ï¼Œéƒ½å…ˆå°†å…¶è½¬åŒ–ä¸ºæ­£æ•°æ¥å¤„ç†ï¼Œè¿™æ ·åšå½“ç„¶æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œä½†æ˜¯ä¼šé€ æˆbugï¼Œè¿™å…¶å®æ˜¯å› ä¸ºåœ¨ int å‹æ•´æ•°ä¸­ï¼Œè´Ÿæ•°è¦æ¯”æ­£æ•°å¤šä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯ `-2147483648` è¿™ä¸ªæ•°ï¼Œå®ƒåœ¨æ­£æ•°ä¸­æ²¡æœ‰ä¸€ä¸ªå€¼ä¸å…¶å¯¹åº”ã€‚æ—¢ç„¶è´Ÿæ•°çš„èŒƒå›´åŸŸæ¯”æ­£æ•°çš„èŒƒå›´åŸŸæ›´å¹¿ï¼Œæˆ‘ä»¬ä½•å°ä¸æ¢ä¸€ç§æ€è·¯ï¼Œä¹Ÿå°±æ˜¯**å°†æ‰€æœ‰çš„æ•°éƒ½å…ˆè½¬æ¢æˆè´Ÿæ•°æ¥å¤„ç†**ï¼Œæœ€åå†è§£å†³ç¬¦å·çš„é—®é¢˜ã€‚æœ‰ç‚¹ä¸ä¹ æƒ¯ï¼Œä½†æ€»çš„é€»è¾‘æ˜¯æ²¡æœ‰ä»»ä½•åŒºåˆ«çš„ã€‚

```java
// å†™æ³•2ï¼Œèƒ½é€šè¿‡ï¼Œä½†è€—æ—¶å¾ˆé•¿
// æ—¶é—´å¤æ‚åº¦ï¼šO(log n)
public int divide(int dividend, int divisor) {
    // ç‰¹åˆ¤ï¼šé™¤æ•°ä¸º0ã€‚ï¼ˆé¢˜ç›®å·²ç»ä¿è¯è¢«é™¤æ•°ä¸ä¸º0ï¼Œæ•…æ— éœ€è€ƒè™‘ï¼‰
    if(dividend == 0) return 0;
    //
    if(divisor == -1 && dividend == Integer.MIN_VALUE) return Integer.MAX_VALUE;
    if(divisor == 1) return dividend;
    else if(divisor == -1) return opposite(dividend);

    // ä¿®æ”¹1
    // è°ƒæ•´ï¼Œå¦‚æœå‡ºç°æ­£æ•°ï¼Œå°†å…¶è½¬åŒ–ä¸ºè´Ÿæ•°å¤„ç†ï¼Œæœ€åè¿”å›ç»“æœæ—¶å†å¤„ç†ç¬¦å·
    boolean isPositive = (dividend < 0 && divisor < 0) || (dividend > 0 && divisor > 0);
    if(dividend > 0)
        dividend = opposite(dividend);
    if(divisor > 0)
        divisor = opposite(divisor);

    // ä¿®æ”¹2
    // ç‰¹åˆ¤ï¼šé™¤æ•°çš„ç»å¯¹å€¼ å°äº è¢«é™¤æ•°çš„ç»å¯¹å€¼ï¼Œç»“æœä¸º0ã€‚æ¯”å¦‚ 1/3, -1/3, 1/(-3)
    if(dividend > divisor) return 0;

    int originalDividend = dividend, originalDivisor = divisor;
    // äºŒåˆ†æ³•
    int ans = 1;
    dividend -= divisor;
    while (divisor >= dividend){ // ä¿®æ”¹3
        ans = ans + ans;
        divisor += divisor;
        dividend -= divisor;
    }
    // å‰©ä½™çš„éƒ¨åˆ†çº¿æ€§å¤„ç†
    while (originalDividend - divisor <= originalDivisor){ // ä¿®æ”¹4
        ans++;
        divisor += originalDivisor;
    }
    return isPositive ? ans : opposite(ans);

}

private int opposite(int x){
    return ~x + 1;
}
```

---

å‡ ä¸ªä¸é”™çš„å‚è€ƒï¼š

1. <https://leetcode-cn.com/problems/search-insert-position/solution/te-bie-hao-yong-de-er-fen-cha-fa-fa-mo-ban-python-/>